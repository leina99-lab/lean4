# 📘 Lean 4 튜토리얼 — Part 10-A: 이산확률의 도입

> **Rosen 이산수학 8판 §7.1 기반 · Mathematics in Lean 참조**
> 이전 파트(Part 9 시리즈)에서 조합론을 배웠다. 이제 그 위에 **확률**(probability)이라는 새 층을 쌓는다.

---

## 🎯 이 파트에서 배울 것

1. **확률**(probability)이란 무엇인가 — 역사와 직관
2. **표본공간**(sample space), **사건**(event), **확률**(probability)의 형식적 정의
3. Lean 4에서 확률을 `Finset`과 `Rat`(유리수)으로 표현하기
4. **여사건**(complementary event)의 확률 — 정리 1
5. **합사건**(union of events)의 확률 — 정리 2 (포함-배제)
6. 기본 전술 복습: `simp`, `omega`, `norm_num`, `ring`, `rw`, `have`, `calc`

---

## 📖 10A.0 확률이란? — 역사적 배경

> 💡 **핵심 한 줄**: 확률은 "일어날 가능성을 숫자로 나타낸 것"이다.

확률론의 기원은 **도박**(gambling)이다. 16세기 이탈리아의 수학자 **지롤라모 카르다노**(Girolamo Cardano, 1501~1576)가 저서 *기회의 게임에 관한 책*(*Liber de Ludo Aleae*)에서 처음으로 확률을 체계적으로 다루었다. 이 책은 1663년에야 출판되었는데, 그 전까지는 세상에 알려지지 않았다.

17세기에 프랑스의 수학자 **블레즈 파스칼**(Blaise Pascal)이 주사위 두 개를 계속 던질 때 나타나는 결과를 분석하여 내기에서의 승률을 예측하였다. 또한 18세기의 프랑스 수학자 **피에르시몽 라플라스**(Pierre-Simon Laplace)는 다음과 같이 확률을 정의하였다:

> **라플라스의 정의**: 어떤 사건의 확률 = (그 사건이 일어나는 경우의 수) / (일어날 수 있는 모든 경우의 수)

이 정의는 단순하지만 강력하다. 우리가 이 파트에서 계속 사용할 핵심 공식이다.

오늘날 확률론은 도박뿐 아니라 **유전학**, **암호학**, **알고리즘 분석**, **스팸 메일 필터링**, **인공지능** 등 다양한 분야에서 핵심적인 역할을 한다.

---

## 📖 10A.1 기본 용어 — 실험, 표본공간, 사건

### 10A.1.1 실험과 표본공간

**실험**(experiment)이란 일어날 수 있는 결과의 집합을 발생시키는 과정이다. 예를 들어:
- 동전 던지기 → 결과: 앞면(H) 또는 뒷면(T)
- 주사위 던지기 → 결과: 1, 2, 3, 4, 5, 6
- 카드 한 장 뽑기 → 결과: 52장 중 하나

실행의 **표본공간**(sample space)은 일어날 수 있는 결과들의 집합이다. 보통 `S`로 표기한다.

| 실험 | 표본공간 S |
|------|---------|
| 동전 던지기 | {H, T} |
| 주사위 던지기 | {1, 2, 3, 4, 5, 6} |
| 동전 2번 던지기 | {HH, HT, TH, TT} |

### 10A.1.2 사건

**사건**(event)은 표본공간의 **부분집합**(subset)이다. 예를 들어:
- "주사위에서 짝수가 나온다" → E = {2, 4, 6} ⊆ {1, 2, 3, 4, 5, 6}
- "동전 2번 던져서 앞면이 1번 이상 나온다" → E = {HH, HT, TH} ⊆ {HH, HT, TH, TT}

### 10A.1.3 Lean 4에서의 표현

Lean 4에서 표본공간은 `Finset`(유한 집합)으로, 사건도 `Finset`의 부분집합으로 표현할 수 있다. 확률값은 `Rat`(유리수, ℚ)을 사용한다.

```lean
import Mathlib.Data.Finset.Basic
import Mathlib.Data.Rat.Basic

-- 주사위의 표본공간
def 주사위 : Finset ℕ := {1, 2, 3, 4, 5, 6}

-- "짝수가 나온다" 라는 사건
def 짝수_사건 : Finset ℕ := {2, 4, 6}

-- 사건이 표본공간의 부분집합인지 확인
example : 짝수_사건 ⊆ 주사위 := by decide
```

> 💡 `Finset`은 Part 9에서 배운 유한 집합이다. 확률에서는 "경우의 수를 세는" 데 `Finset.card`(원소의 개수, `#s`)를 사용한다.

---

## 📖 10A.2 유한 확률 — 라플라스의 정의

### 정의 1: 유한 확률

> 동일한 비율로 발생할 수 있는 결과의 유한한 공집합이 아닌 **표본공간**(sample space) `S`와 `S`의 부분집합인 **사건**(event) `E`에 대해서 `E`의 **확률**(probability)은:
>
> **p(E) = |E| / |S|**
>
> 여기서 |E|는 사건 E의 원소 개수, |S|는 표본공간 S의 원소 개수이다.

이 정의에 따르면:
- 확률은 항상 **0과 1 사이**의 값이다: 0 ≤ p(E) ≤ 1
- 왜냐하면 E ⊆ S이므로 0 ≤ |E| ≤ |S|

### Lean 4에서 확률 함수 정의하기

```lean
import Mathlib.Data.Finset.Basic
import Mathlib.Data.Rat.Basic

-- 확률 함수: 사건의 크기 / 표본공간의 크기
-- Lean에서는 자연수 나눗셈이 내림이므로, 유리수(Rat)로 변환한다
def prob (event sample : Finset ℕ) (h : sample.Nonempty) : ℚ :=
  (event ∩ sample).card / sample.card
```

여기서 `event ∩ sample`을 사용하는 이유는, 사건이 표본공간에 속하는 원소만 세기 위해서이다. 만약 `event ⊆ sample`이 보장되면 `event ∩ sample = event`이므로 `event.card / sample.card`와 같아진다.

> ⚠️ **주의**: Lean의 자연수(`ℕ`)에서 나눗셈은 **내림 나눗셈**(floor division)이다. 예를 들어 `4 / 9 = 0`이다! 그래서 확률을 정확히 계산하려면 **유리수**(ℚ, `Rat`)로 바꿔야 한다.

---

## 📖 10A.3 예제로 배우는 확률 계산

### 예제 1: 파란 공 뽑기 (Rosen 예제 1)

> 파란 공 4개와 빨간 공 5개가 들어 있는 항아리에서 임의로 한 개의 공을 꺼냈을 때 파란 공이 나올 확률은?

**풀이**: 표본공간 S = {모든 공} → |S| = 9, 사건 E = {파란 공} → |E| = 4

p(E) = |E| / |S| = 4 / 9

```lean
-- 항아리 예제: 파란 공 4개, 빨간 공 5개
-- 공을 0~8로 번호 매기자. 0,1,2,3 = 파란, 4,5,6,7,8 = 빨간
def 항아리 : Finset ℕ := Finset.range 9          -- {0,1,2,3,4,5,6,7,8}
def 파란공 : Finset ℕ := {0, 1, 2, 3}            -- 파란 공 4개

-- |S| = 9
example : 항아리.card = 9 := by native_decide

-- |E| = 4
example : 파란공.card = 4 := by native_decide

-- 파란공 ⊆ 항아리
example : 파란공 ⊆ 항아리 := by decide

-- 확률 = 4/9
example : (파란공.card : ℚ) / (항아리.card : ℚ) = 4 / 9 := by native_decide
```

### 예제 2: 주사위 합이 7 (Rosen 예제 2)

> 두 개의 주사위를 던져서 나온 숫자의 합이 7이 될 확률은?

**풀이**:
- 표본공간: 한 개의 주사위 결과가 6가지이므로, 두 개 주사위의 모든 경우의 수는 6² = 36
- 합이 7이 되는 경우: (1,6), (2,5), (3,4), (4,3), (5,2), (6,1) → 6가지
- 확률 = 6/36 = 1/6

```lean
import Mathlib.Data.Finset.Basic

-- 두 주사위: 표본공간 = {1,...,6} × {1,...,6}
-- Finset.Icc 1 6 = {1, 2, 3, 4, 5, 6}
def 주사위쌍 : Finset (ℕ × ℕ) :=
  (Finset.Icc 1 6) ×ˢ (Finset.Icc 1 6)

-- 합이 7인 사건
def 합이7 : Finset (ℕ × ℕ) :=
  주사위쌍.filter (fun p => p.1 + p.2 = 7)

-- |S| = 36
example : 주사위쌍.card = 36 := by native_decide

-- |E| = 6
example : 합이7.card = 6 := by native_decide

-- 확률 = 6/36 = 1/6
example : (합이7.card : ℚ) / (주사위쌍.card : ℚ) = 1 / 6 := by native_decide
```

> 💡 **`Finset.filter`의 역할**: `s.filter p`는 집합 `s`에서 조건 `p`를 만족하는 원소만 골라낸다. 확률에서 "조건을 만족하는 경우의 수"를 셀 때 매우 유용하다!

### 예제 3: 복권 당첨 (Rosen 예제 3)

> 어떤 복권에서 0, 1, …, 9 중에서 숫자를 4번 반복 선택한다. 기계가 임의로 4개의 숫자를 선택하여 나온 숫자와 순서까지 모두 일치하면 1등에 당첨된다. 1등에 당첨될 확률은?

**풀이**:
- 4자리 숫자의 모든 경우의 수: 10⁴ = 10,000
- 당첨되는 경우: 단 1가지 (순서까지 정확히 일치)
- 1등 확률 = 1/10,000 = 0.0001

```lean
-- 복권: 4자리 숫자 맞추기
-- 모든 경우의 수 = 10^4 = 10000
example : (10 : ℕ) ^ 4 = 10000 := by norm_num

-- 1등 확률 = 1/10000
example : (1 : ℚ) / 10000 = 1 / 10000 := by ring
```

> 2등(3개 숫자만 일치)의 경우: 같은 위치에 3개가 일치하고 나머지 1개만 다른 경우이다. 1개가 다른 위치를 고르는 방법이 4가지, 그 위치에서 다른 숫자를 고르는 방법이 9가지이므로, 2등 경우의 수 = 4 × 9 = 36이다.
> 2등 확률 = 36/10,000 = 9/2,500 = 0.0036

### 예제 4: 로또 (Rosen 예제 4)

> 1부터 n까지의 정수 중에서 6개를 골라 모두 맞추면 상금을 주는 복권이 있다. n이 40일 때 6개의 숫자를 모두 맞출 확률은?

**풀이**:
- 당첨되는 경우의 수 = 1 (6개 모두 일치)
- 모든 경우의 수 = C(40, 6) = 40! / (34! × 6!) = 3,838,380
- 확률 = 1/3,838,380 ≈ 0.00000026

```lean
import Mathlib.Data.Nat.Choose.Basic

-- C(40, 6) = 3838380
example : Nat.choose 40 6 = 3838380 := by native_decide

-- 당첨 확률 ≈ 1/3838380
-- 이것은 약 260만 분의 1이라는 뜻이다!
```

---

## 📖 10A.4 여사건의 확률 — 정리 1

어떤 사건의 확률을 직접 구하기 어려울 때, "그 사건이 일어나지 않을 확률"을 구하면 더 쉬울 수 있다.

### 정의: 여사건

사건 `E`의 **여사건**(complementary event)은 `E`에 속하지 않는 모든 결과의 집합이다. 표기: `Ē = S - E`

예를 들어:
- 주사위에서 "짝수가 나온다" 의 여사건 = "홀수가 나온다" = {1, 3, 5}
- "적어도 하나의 0이 있다" 의 여사건 = "0이 하나도 없다"

### 정리 1: 여사건의 확률

> **p(Ē) = 1 - p(E)**

**증명**: Ē = S - E이므로 |Ē| = |S| - |E|이다. 따라서:

p(Ē) = |Ē| / |S| = (|S| - |E|) / |S| = 1 - |E| / |S| = 1 - p(E)

### 왜 중요한가?

"적어도 하나"가 들어간 확률 문제는 여사건을 이용하면 훨씬 쉽게 풀린다!
- "적어도 하나의 0이 있을 확률" = 1 - "0이 하나도 없을 확률"

### Lean 4에서 여사건 정리 증명

```lean
import Mathlib.Data.Finset.Basic

-- 여사건 정리: |Ē| = |S| - |E| (E ⊆ S일 때)
theorem complement_card {α : Type*} [DecidableEq α]
    (S E : Finset α) (h : E ⊆ S) :
    (S \ E).card = S.card - E.card := by
  rw [Finset.card_sdiff h]
```

여기서 `S \ E`는 Lean에서 **차집합**(set difference)을 나타낸다. `Finset.card_sdiff`는 Mathlib에 이미 증명되어 있는 보조정리이다.

### 예제 8: 비트열에서 0 포함 (Rosen 예제 8)

> 임의로 생성된 10개의 비트로 구성된 비트열에서 적어도 한 비트가 0일 확률은?

**풀이**: 직접 구하려면 (정확히 1개가 0인 경우) + (정확히 2개가 0인 경우) + … + (10개 모두 0인 경우)를 다 더해야 해서 매우 복잡하다.

여사건을 이용하자!
- E = "적어도 한 비트가 0" (구하고 싶은 것)
- Ē = "모든 비트가 1" (간단!)
- 표본공간: 길이 10인 모든 비트열 → |S| = 2¹⁰ = 1024
- |Ē| = 1 (모든 비트가 1인 경우는 단 1가지)
- p(Ē) = 1/1024
- **p(E) = 1 - p(Ē) = 1 - 1/1024 = 1023/1024**

```lean
-- 비트열 예제
-- 표본공간 크기: 2^10 = 1024
example : (2 : ℕ) ^ 10 = 1024 := by norm_num

-- 여사건(모든 비트가 1) 크기: 1
-- 따라서 p(E) = 1 - 1/1024 = 1023/1024
example : 1 - (1 : ℚ) / 1024 = 1023 / 1024 := by norm_num
```

> 💡 이 예제가 여사건의 위력을 보여준다. 직접 계산하면 C(10,1) + C(10,2) + … + C(10,10)을 더해야 하지만, 여사건을 쓰면 한 줄이면 끝난다!

---

## 📖 10A.5 합사건의 확률 — 정리 2 (포함-배제 원리)

두 사건이 동시에 일어나는 경우를 고려하여 "둘 중 하나라도 일어날 확률"을 구해야 할 때가 있다.

### 정리 2: 합사건의 확률

> E₁, E₂가 표본공간 S에서의 사건일 때:
>
> **p(E₁ ∪ E₂) = p(E₁) + p(E₂) - p(E₁ ∩ E₂)**

**증명**: 2장(집합론)에서 배운 **포함-배제 원리**(inclusion-exclusion principle)에 의해:

|E₁ ∪ E₂| = |E₁| + |E₂| - |E₁ ∩ E₂|

양변을 |S|로 나누면:

p(E₁ ∪ E₂) = |E₁ ∪ E₂| / |S| = (|E₁| + |E₂| - |E₁ ∩ E₂|) / |S| = p(E₁) + p(E₂) - p(E₁ ∩ E₂)

### 왜 빼야 하는가?

만약 E₁과 E₂에 공통 원소가 있다면, 그 원소가 p(E₁) + p(E₂)에서 **두 번 세어진다**. 그래서 한 번 빼주는 것이다.

만약 E₁과 E₂가 **서로소**(disjoint), 즉 E₁ ∩ E₂ = ∅이면:

p(E₁ ∪ E₂) = p(E₁) + p(E₂)

### Lean 4에서 포함-배제 원리

```lean
import Mathlib.Data.Finset.Basic

-- Finset의 포함-배제: |A ∪ B| = |A| + |B| - |A ∩ B|
-- 이것은 Mathlib에서 Finset.card_union으로 제공된다
#check @Finset.card_union

-- 서로소인 경우: |A ∪ B| = |A| + |B|
#check @Finset.card_union_of_disjoint
```

### 예제 9: 2의 배수 또는 5의 배수 (Rosen 예제 9)

> 1부터 100까지의 정수 중에서 임의로 선택된 수가 2의 배수이거나 5의 배수일 확률은?

**풀이**:
- E₁ = "2의 배수" → |E₁| = 50 (2, 4, 6, …, 100)
- E₂ = "5의 배수" → |E₂| = 20 (5, 10, 15, …, 100)
- E₁ ∩ E₂ = "10의 배수" → |E₁ ∩ E₂| = 10 (10, 20, 30, …, 100)
- p(E₁ ∪ E₂) = 50/100 + 20/100 - 10/100 = 60/100 = **3/5**

```lean
import Mathlib.Data.Finset.Basic

-- 1~100에서 2의 배수, 5의 배수
def S100 : Finset ℕ := Finset.Icc 1 100
def 배수2 : Finset ℕ := S100.filter (fun n => n % 2 = 0)
def 배수5 : Finset ℕ := S100.filter (fun n => n % 5 = 0)
def 배수10 : Finset ℕ := S100.filter (fun n => n % 10 = 0)

-- |E₁| = 50, |E₂| = 20, |E₁ ∩ E₂| = 10
example : 배수2.card = 50 := by native_decide
example : 배수5.card = 20 := by native_decide
example : 배수10.card = 10 := by native_decide

-- 포함-배제: 50/100 + 20/100 - 10/100 = 3/5
example : (50 : ℚ) / 100 + 20 / 100 - 10 / 100 = 3 / 5 := by norm_num
```

---

## 📖 10A.6 확률적 추론 — 몬티 홀 문제

확률에서 직관이 틀릴 수 있다는 것을 보여주는 유명한 문제가 있다.

### 예제 10: 몬티 홀 문제 (Rosen 예제 10)

> 게임 쇼에 참가하여 3개의 문 중 하나를 선택해야 한다. 하나의 문 뒤에는 자동차가, 나머지 두 문 뒤에는 아무것도 없다. 당신이 문 하나를 선택하면, 진행자(답을 알고 있음)가 나머지 두 문 중 빈 문 하나를 열어 보여준다. 그런 다음 진행자가 물어본다: "처음 선택을 바꾸시겠습니까?"

**직관적 분석**:
- 처음 선택이 맞을 확률: 1/3
- 처음 선택이 틀릴 확률: 2/3

진행자가 빈 문을 열어준 후:
- 처음 선택을 **유지**하면 → 성공 확률 = 1/3
- 선택을 **바꾸면** → 성공 확률 = 2/3 (처음에 틀렸다면, 바꾸면 반드시 맞다!)

> 🎯 **결론**: 무조건 바꾸는 것이 성공 확률을 **두 배**로 높인다!

```lean
-- 몬티 홀: 바꾸지 않을 때 확률 = 1/3
example : (1 : ℚ) / 3 = 1 / 3 := by ring

-- 바꿀 때 확률 = 2/3
example : (2 : ℚ) / 3 = 2 / 3 := by ring

-- 바꾸는 것이 2배 유리하다
example : (2 : ℚ) / 3 = 2 * (1 / 3) := by ring
```

이 문제는 많은 수학자들도 처음에는 "바꾸든 안 바꾸든 1/2 아닌가?"라고 생각했을 정도로 반직관적이다. 하지만 확률을 엄밀하게 계산하면, **선택을 바꾸는 것이 항상 유리하다**.

---

## 📖 10A.7 Lean 4 기초 복습 — 확률 문제에 쓰이는 핵심 전술

확률 문제를 Lean 4로 풀 때 자주 사용하는 전술들을 복습하자.

| 전술 | 역할 | 사용 예 |
|------|------|--------|
| `norm_num` | 수치 계산 자동화 | `1/3 + 2/3 = 1` |
| `ring` | 대수적 등식 | `a * b = b * a` |
| `simp` | 단순화 규칙 적용 | `Finset.card_empty = 0` |
| `omega` | 자연수/정수 부등식 | `0 ≤ n` |
| `native_decide` | 결정 가능한 명제 계산 | `Finset.card {1,2,3} = 3` |
| `decide` | 작은 결정 문제 | `2 ∈ {1, 2, 3}` |
| `rw [...]` | 등식으로 치환 | `rw [Finset.card_sdiff h]` |
| `have` | 중간 결과 도입 | `have h : p(E) = 4/9 := ...` |
| `calc` | 단계별 계산 | 아래 예제 참고 |

### calc 예제: 포함-배제를 단계별로

```lean
-- 2의 배수 또는 5의 배수 확률을 calc로 계산
example : (50 : ℚ) / 100 + 20 / 100 - 10 / 100 = 3 / 5 := by
  calc (50 : ℚ) / 100 + 20 / 100 - 10 / 100
      = (50 + 20 - 10) / 100 := by ring
    _ = 60 / 100             := by norm_num
    _ = 3 / 5                := by norm_num
```

---

## ✏️ 10A.8 연습문제 — 설명형

### 연습 1: 기본 확률 계산

> 52장 카드 한 벌에서 임의로 한 장을 뽑았을 때 A(에이스)가 나올 확률은?

**힌트**: A는 4장(♠A, ♥A, ♦A, ♣A), 전체는 52장

```lean
-- 연습 1: A가 나올 확률
example : (4 : ℚ) / 52 = 1 / 13 := by
  norm_num
```

<details>
<summary>📝 풀이 보기</summary>

p(A) = 4/52 = 1/13. 52장 중 A는 4장이므로 4/52 = 1/13이다.

```lean
example : (4 : ℚ) / 52 = 1 / 13 := by norm_num
```

</details>

---

### 연습 2: 주사위 확률

> 주사위를 던져 6이 나올 확률은?

```lean
-- 연습 2: 6이 나올 확률
example : (1 : ℚ) / 6 = 1 / 6 := by
  /-답을 채우세요-/ sorry
```

<details>
<summary>📝 풀이 보기</summary>

표본공간 = {1,2,3,4,5,6}, 사건 = {6}. p = 1/6.

```lean
example : (1 : ℚ) / 6 = 1 / 6 := by ring
```

</details>

---

### 연습 3: 홀수 나올 확률

> 1부터 100까지의 정수 중에서 하나를 임의로 선택했을 때, 홀수가 나올 확률은?

```lean
-- 연습 3
example : (50 : ℚ) / 100 = 1 / 2 := by
  /-답을 채우세요-/ sorry
```

<details>
<summary>📝 풀이 보기</summary>

1~100 중 홀수는 50개: 1, 3, 5, …, 99. p = 50/100 = 1/2.

```lean
example : (50 : ℚ) / 100 = 1 / 2 := by norm_num
```

</details>

---

## ✏️ 10A.9 연습문제 — 괄호 채우기 (Skeleton)

### 연습 4: 윤년에서 4월일 확률

> 윤년(1년이 366일인 경우)인 어느 해에 하루를 임의로 선택했을 때, 그 날이 4월일 확률은?

**힌트**: 4월은 30일이다.

```lean
-- 연습 4: 4월은 30일, 윤년은 366일
example : (30 : ℚ) / 366 = /-여기를 채우세요-/ := by
  norm_num
```

<details>
<summary>📝 풀이 보기</summary>

4월은 30일이고 윤년은 366일. p = 30/366 = 5/61.

```lean
example : (30 : ℚ) / 366 = 5 / 61 := by norm_num
```

</details>

---

### 연습 5: 짝수일 주사위

> 두 개의 주사위를 던져 나온 두 수의 합이 짝수일 확률은?

**힌트**: 합이 짝수가 되려면 (홀+홀) 또는 (짝+짝)이어야 한다. 각 3×3 = 9가지씩, 총 18가지.

```lean
-- 연습 5: 두 주사위 합이 짝수인 경우의 수
-- 표본공간 |S| = 36
-- 합이 짝수인 경우의 수 = 18
example : (/-여기를 채우세요-/ : ℚ) / 36 = 1 / 2 := by
  norm_num
```

<details>
<summary>📝 풀이 보기</summary>

합이 짝수 = (홀,홀) 9가지 + (짝,짝) 9가지 = 18가지. p = 18/36 = 1/2.

```lean
example : (18 : ℚ) / 36 = 1 / 2 := by norm_num
```

</details>

---

### 연습 6: 포커에서 같은 숫자 4장

> 포커 게임에서 카드 5장을 받았을 때 숫자가 같은 카드 4장이 들어올 확률은?

**힌트**: 
- 같은 숫자 4장을 고르는 방법: 13가지 숫자 × C(4,4) = 13 × 1 = 13
- 나머지 1장: 48장 중 1장 = C(48,1) = 48
- 모든 경우: C(52,5) = 2,598,960
- 확률 = 13 × 48 / 2,598,960

```lean
-- 연습 6
-- 분자: 13 * 1 * 48 = 624
example : 13 * 1 * 48 = /-여기를 채우세요-/ := by norm_num

-- 분모: C(52, 5) = 2598960
example : Nat.choose 52 5 = /-여기를 채우세요-/ := by native_decide

-- 확률 (약분)
example : (624 : ℚ) / 2598960 = /-여기를 채우세요-/ := by norm_num
```

<details>
<summary>📝 풀이 보기</summary>

- 분자 = 13 × 48 = 624
- 분모 = C(52,5) = 2,598,960
- 확률 = 624/2,598,960 = 1/4165

```lean
example : 13 * 1 * 48 = 624 := by norm_num
example : Nat.choose 52 5 = 2598960 := by native_decide
example : (624 : ℚ) / 2598960 = 1 / 4165 := by norm_num
```

</details>

---

### 연습 7: 여사건 활용

> 동전을 6번 던져 모두 앞면이 나올 확률은 얼마인가? 그리고 적어도 한 번은 뒷면이 나올 확률은?

```lean
-- 연습 7
-- 모두 앞면: 1가지 / 전체: 2^6 = 64가지
example : (2 : ℕ) ^ 6 = /-여기를 채우세요-/ := by norm_num

-- 모두 앞면일 확률
example : (1 : ℚ) / 64 = 1 / 64 := by ring

-- 적어도 한 번 뒷면 (여사건) = 1 - 1/64
example : 1 - (1 : ℚ) / 64 = /-여기를 채우세요-/ := by norm_num
```

<details>
<summary>📝 풀이 보기</summary>

2⁶ = 64, 모두 앞면 확률 = 1/64, 여사건 확률 = 1 - 1/64 = 63/64.

```lean
example : (2 : ℕ) ^ 6 = 64 := by norm_num
example : (1 : ℚ) / 64 = 1 / 64 := by ring
example : 1 - (1 : ℚ) / 64 = 63 / 64 := by norm_num
```

</details>

---

### 연습 8: 포함-배제

> 1부터 100까지의 정수 중에서 임의로 선택한 수가 5의 배수이거나 7의 배수일 확률은?

**힌트**: |5의 배수| = 20, |7의 배수| = 14, |35의 배수| = 2

```lean
-- 연습 8: 포함-배제
-- p = 20/100 + 14/100 - 2/100
example : (20 : ℚ) / 100 + 14 / 100 - /-여기를 채우세요-/ / 100 = 8 / 25 := by
  norm_num
```

<details>
<summary>📝 풀이 보기</summary>

5의 배수: 5,10,...,100 → 20개. 7의 배수: 7,14,...,98 → 14개. 35의 배수: 35,70 → 2개.

p = (20 + 14 - 2)/100 = 32/100 = 8/25.

```lean
example : (20 : ℚ) / 100 + 14 / 100 - 2 / 100 = 8 / 25 := by norm_num
```

</details>

---

## ✏️ 10A.10 연습문제 — sorry 채우기

### 연습 9: 카드에서 하트

> 52장 카드 한 벌에서 임의로 한 장을 뽑았을 때 하트일 확률을 증명하라.

```lean
-- 연습 9: 하트는 13장, 전체 52장
example : (13 : ℚ) / 52 = 1 / 4 := by
  sorry
```

<details>
<summary>📝 풀이 보기</summary>

```lean
example : (13 : ℚ) / 52 = 1 / 4 := by norm_num
```

</details>

---

### 연습 10: 복원 추출 vs 비복원 추출

> 1부터 50까지 번호가 매겨진 50개의 공이 담긴 바구니에서 5번 공을 꺼내 나온 순서대로 번호가 11, 4, 17, 39, 23일 확률을 구하라. (비복원 추출)

**힌트**: 비복원 추출의 모든 경우의 수 = 50 × 49 × 48 × 47 × 46

```lean
-- 연습 10: 비복원 추출
-- 모든 경우의 수 = P(50, 5) = 50 * 49 * 48 * 47 * 46
example : 50 * 49 * 48 * 47 * 46 = 254251200 := by
  sorry

-- 확률 = 1/254251200
example : (1 : ℚ) / 254251200 = 1 / 254251200 := by
  sorry
```

<details>
<summary>📝 풀이 보기</summary>

```lean
example : 50 * 49 * 48 * 47 * 46 = 254251200 := by norm_num
example : (1 : ℚ) / 254251200 = 1 / 254251200 := by ring
```

</details>

---

### 연습 11: 복원 추출

> 같은 조건에서 복원 추출일 때의 확률은?

**힌트**: 복원 추출의 모든 경우의 수 = 50⁵ = 312,500,000

```lean
-- 연습 11: 복원 추출
example : (50 : ℕ) ^ 5 = 312500000 := by
  sorry

example : (1 : ℚ) / 312500000 = 1 / 312500000 := by
  sorry
```

<details>
<summary>📝 풀이 보기</summary>

```lean
example : (50 : ℕ) ^ 5 = 312500000 := by norm_num
example : (1 : ℚ) / 312500000 = 1 / 312500000 := by ring
```

</details>

---

### 연습 12: 여사건 — 비트열

> 임의로 생성된 8개의 비트로 구성된 비트열에서 적어도 한 비트가 0일 확률을 구하라.

```lean
-- 연습 12
-- 표본공간: 2^8 = 256
-- 여사건(모두 1): 1가지
-- p(E) = 1 - 1/256 = ?
example : (2 : ℕ) ^ 8 = 256 := by sorry
example : 1 - (1 : ℚ) / 256 = 255 / 256 := by sorry
```

<details>
<summary>📝 풀이 보기</summary>

```lean
example : (2 : ℕ) ^ 8 = 256 := by norm_num
example : 1 - (1 : ℚ) / 256 = 255 / 256 := by norm_num
```

</details>

---

### 연습 13: 포함-배제 — 3의 배수

> 1부터 100까지의 정수 중에서 임의로 선택한 수가 3의 배수일 확률은?

```lean
-- 연습 13: 3의 배수 = 3,6,...,99 → 33개
example : (33 : ℚ) / 100 = 33 / 100 := by sorry
```

<details>
<summary>📝 풀이 보기</summary>

1~100에서 3의 배수: 3, 6, 9, …, 99 → ⌊100/3⌋ = 33개. p = 33/100.

```lean
example : (33 : ℚ) / 100 = 33 / 100 := by ring
```

</details>

---

### 연습 14: 종합 — 포함-배제와 Finset

> 다음을 Lean 4로 증명하라: 1부터 100까지에서 2의 배수이거나 3의 배수일 확률은 67/100이다.

**힌트**: 
- 2의 배수: 50개
- 3의 배수: 33개
- 6의 배수(공통): 16개
- 포함-배제: (50 + 33 - 16) / 100 = 67/100

```lean
-- 연습 14
example : (50 : ℚ) / 100 + 33 / 100 - 16 / 100 = 67 / 100 := by
  sorry
```

<details>
<summary>📝 풀이 보기</summary>

```lean
example : (50 : ℚ) / 100 + 33 / 100 - 16 / 100 = 67 / 100 := by norm_num
```

</details>

---

## 📋 10A.11 핵심 정리 · 전술 요약

### 확률 공식 요약

| 공식 | 의미 |
|------|------|
| p(E) = \|E\| / \|S\| | 라플라스의 확률 정의 |
| p(Ē) = 1 - p(E) | 여사건의 확률 (정리 1) |
| p(E₁ ∪ E₂) = p(E₁) + p(E₂) - p(E₁ ∩ E₂) | 합사건의 확률 (정리 2, 포함-배제) |
| 0 ≤ p(E) ≤ 1 | 확률의 범위 |

### Lean 4 도구 요약

| Lean 4 표현 | 의미 |
|-------------|------|
| `Finset.card s` 또는 `#s` | 집합의 원소 개수 \|S\| |
| `s.filter p` | 조건 p를 만족하는 원소만 추출 |
| `s \ t` | 차집합 (S - E) |
| `s ∪ t` | 합집합 |
| `s ∩ t` | 교집합 |
| `(n : ℚ) / m` | 유리수 나눗셈으로 정확한 확률 |
| `Nat.choose n k` | 조합 C(n,k) |
| `native_decide` | 유한 계산 자동 판정 |
| `norm_num` | 수치 계산 자동화 |

---

## 🔜 다음 파트 예고

**Part 10-B**에서는 §7.2 **확률론**(Probability Theory)을 다룬다:
- **확률분포**(probability distribution)
- **조건부확률**(conditional probability)
- **독립사건**(independent events)
- **베르누이 시행**(Bernoulli trial)과 **이항분포**(binomial distribution)
- **확률변수**(random variable)
- **생일문제**(birthday problem)

확률의 기초를 완벽하게 익힌 후, 다음 파트에서 더 깊은 이론으로 나아가자! 🎲
