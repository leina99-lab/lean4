# Part 11-D: í¬í•¨-ë°°ì œ ì›ë¦¬ (Inclusion-Exclusion Principle)

> **Rosen ã€ì´ì‚°ìˆ˜í•™ã€ 8íŒ 8.5â€“8.6ì ˆ** ê¸°ë°˜  
> **ì„ ìˆ˜ ì§€ì‹**: Part 5-D (ì§‘í•©ë¡  ê¸°ì´ˆ), Part 11-C (ìƒì„± í•¨ìˆ˜ ê¸°ì´ˆ)  
> **ëª©í‘œ**: í¬í•¨-ë°°ì œ ì›ë¦¬ë¥¼ ì´í•´í•˜ê³ , Lean 4ì˜ `Finset` ì—°ì‚°ìœ¼ë¡œ í˜•ì‹í™”í•˜ëŠ” ë°©ë²•ì„ ìµíŒë‹¤.

---

## 0. ì´ íŒŒíŠ¸ì—ì„œ ë°°ìš¸ í•µì‹¬ ê°œë…

| ê°œë… | ì„¤ëª… |
|------|------|
| **í¬í•¨-ë°°ì œ ì›ë¦¬**(inclusion-exclusion principle) | í•©ì§‘í•©ì˜ ì›ì†Œ ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ê³µì‹ |
| **í•©ì§‘í•©**(union) | ë‘ ì§‘í•© ì¤‘ í•˜ë‚˜ ì´ìƒì— ì†í•˜ëŠ” ì›ì†Œë“¤ |
| **êµì§‘í•©**(intersection) | ë‘ ì§‘í•© ëª¨ë‘ì— ì†í•˜ëŠ” ì›ì†Œë“¤ |
| **ë²¤ ë‹¤ì´ì–´ê·¸ë¨**(Venn diagram) | ì§‘í•© ê´€ê³„ë¥¼ ì‹œê°í™”í•˜ëŠ” ë„êµ¬ |
| **ì „ì‚¬ í•¨ìˆ˜**(surjection) | ê³µì—­ì˜ ëª¨ë“  ì›ì†Œê°€ ìƒì— í¬í•¨ |
| **êµë€**(derangement) | ëª¨ë“  ì›ì†Œê°€ ì›ë˜ ìœ„ì¹˜ê°€ ì•„ë‹Œ ìˆœì—´ |

> ğŸ’¡ **ì™œ í¬í•¨-ë°°ì œë¥¼ ë°°ìš¸ê¹Œ?**  
> "ì—¬í•™ìƒ ë˜ëŠ” 2í•™ë…„ì¸ í•™ìƒì€ ëª‡ ëª…ì¸ê°€?"ì™€ ê°™ì€ ì§ˆë¬¸ì—ì„œ, ë‹¨ìˆœíˆ ë‘ ìˆ˜ë¥¼ ë”í•˜ë©´ **ì¤‘ë³µ ê³„ì‚°**ì´ ë°œìƒí•œë‹¤. í¬í•¨-ë°°ì œ ì›ë¦¬ëŠ” ì´ ì¤‘ë³µì„ ì²´ê³„ì ìœ¼ë¡œ ì œê±°í•˜ëŠ” ê³µì‹ì´ë‹¤. ì´ ì›ë¦¬ëŠ” í™•ë¥ , ì¡°í•©ë¡ , ì •ìˆ˜ë¡  ë“± ìˆ˜í•™ ì „ë°˜ì— ê±¸ì³ í­ë„“ê²Œ ì‚¬ìš©ëœë‹¤.

---

## 1. ë‘ ì§‘í•©ì˜ í¬í•¨-ë°°ì œ: ì§ê´€ì  ì´í•´

### 1.1 ë¬¸ì œ ìƒí™©

í•œ ì´ì‚°ìˆ˜í•™ ë°˜ì— 30ëª…ì˜ ì—¬í•™ìƒê³¼ 50ëª…ì˜ 2í•™ë…„ìƒì´ ìˆë‹¤. ì´ ë°˜ì˜ í•™ìƒ ì¤‘ "ì—¬í•™ìƒì´ê±°ë‚˜ 2í•™ë…„ì¸" í•™ìƒì€ ëª‡ ëª…ì¸ê°€?

ì²˜ìŒ ìƒê°: 30 + 50 = 80ëª…? â†’ **í‹€ë ¸ë‹¤!** ì™œëƒí•˜ë©´ "ì—¬ì 2í•™ë…„"ì´ ì–‘ìª½ ëª¨ë‘ì—ì„œ ì„¸ì–´ì§€ê¸° ë•Œë¬¸ì´ë‹¤.

ë§Œì•½ ì—¬ì 2í•™ë…„ì´ 15ëª…ì´ë¼ë©´:

```
ì—¬í•™ìƒì´ê±°ë‚˜ 2í•™ë…„ì¸ í•™ìƒ = 30 + 50 - 15 = 65ëª…
```

ì´ê²ƒì´ ë°”ë¡œ í¬í•¨-ë°°ì œ ì›ë¦¬ì˜ í•µì‹¬ì´ë‹¤!

### 1.2 ë‘ ì§‘í•©ì˜ í¬í•¨-ë°°ì œ ê³µì‹

> **ê³µì‹**: ë‘ ìœ í•œì§‘í•© `A`ì™€ `B`ì— ëŒ€í•´:
>
> $$|A \cup B| = |A| + |B| - |A \cap B|$$

**ì§ê´€ì  ì´í•´**:
1. ë¨¼ì € `A`ì˜ ì›ì†Œë¥¼ ëª¨ë‘ ì„¼ë‹¤ â†’ `|A|`
2. ë‹¤ìŒ `B`ì˜ ì›ì†Œë¥¼ ëª¨ë‘ ì„¼ë‹¤ â†’ `|B|`
3. í•˜ì§€ë§Œ `A âˆ© B`ì— ì†í•˜ëŠ” ì›ì†ŒëŠ” **ë‘ ë²ˆ** ì„¸ì—ˆìœ¼ë¯€ë¡œ, í•œ ë²ˆ ë¹¼ì¤€ë‹¤ â†’ `-|A âˆ© B|`

> ğŸ’ **ë¹„ìœ **: íŒŒí‹°ì— ì˜¨ ì‚¬ëŒì„ ì…€ ë•Œ, "ë¹¨ê°„ ëª¨ìë¥¼ ì“´ ì‚¬ëŒ"ê³¼ "ì•ˆê²½ì„ ì“´ ì‚¬ëŒ"ì„ ê°ê° ì„¸ë©´, "ë¹¨ê°„ ëª¨ì + ì•ˆê²½"ì¸ ì‚¬ëŒì´ ë‘ ë²ˆ ì„¸ì–´ì§„ë‹¤. ê·¸ë˜ì„œ í•œ ë²ˆ ë¹¼ì¤˜ì•¼ í•œë‹¤.

### 1.3 Lean 4ë¡œ í˜•ì‹í™”

Lean 4ì˜ Mathlibì—ì„œëŠ” `Finset`(ìœ í•œ ì§‘í•©)ì— ëŒ€í•´ ì´ ê³µì‹ì´ ì´ë¯¸ ì¦ëª…ë˜ì–´ ìˆë‹¤.

```lean
import Mathlib.Data.Finset.Basic
import Mathlib.Data.Finset.Card

open Finset

-- ë‘ ì§‘í•©ì˜ í•©ì§‘í•© í¬ê¸° ê³µì‹
-- Mathlibì— ì´ë¯¸ ìˆëŠ” ì •ë¦¬:
#check Finset.card_union_add_card_inter
-- card_union_add_card_inter :
--   (s âˆª t).card + (s âˆ© t).card = s.card + t.card

-- ì´ê²ƒì„ ë³€í˜•í•˜ë©´:
-- (s âˆª t).card = s.card + t.card - (s âˆ© t).card
```

#### Lean 4 ê¸°ì´ˆ: Finset ë‹¤ë£¨ê¸°

`Finset`ì€ **ìœ í•œ ì§‘í•©**ì„ ë‚˜íƒ€ë‚´ëŠ” Lean 4ì˜ íƒ€ì…ì´ë‹¤. `Set`(ë¬´í•œ ì§‘í•©ë„ ê°€ëŠ¥)ê³¼ ë‹¬ë¦¬, `Finset`ì€ ì›ì†Œë¥¼ ì—´ê±°í•  ìˆ˜ ìˆê³  í¬ê¸°ë¥¼ ì…€ ìˆ˜ ìˆë‹¤.

```lean
-- Finset ë§Œë“¤ê¸°
def A : Finset â„• := {1, 2, 3, 4, 5}
def B : Finset â„• := {3, 4, 5, 6, 7}

-- ê¸°ë³¸ ì—°ì‚°
#eval A âˆª B         -- {1, 2, 3, 4, 5, 6, 7}
#eval A âˆ© B         -- {3, 4, 5}
#eval A.card        -- 5
#eval B.card        -- 5
#eval (A âˆª B).card  -- 7
#eval (A âˆ© B).card  -- 3

-- í¬í•¨-ë°°ì œ í™•ì¸: 7 = 5 + 5 - 3 âœ“
```

---

## 2. ì˜ˆì œë¡œ ì´í•´í•˜ê¸°

### 2.1 ì˜ˆì œ 1: ì´ì‚°ìˆ˜í•™ ë°˜ (Rosen ì˜ˆì œ 1)

> **ë¬¸ì œ**: ì»´í“¨í„°ê³¼í•™ ì „ê³µì 25ëª…, ìˆ˜í•™ ì „ê³µì 13ëª…, ë³µìˆ˜ ì „ê³µì 8ëª…ì´ ìˆë‹¤. ì»´í“¨í„°ê³¼í•™ ë˜ëŠ” ìˆ˜í•™ì„ ì „ê³µí•˜ëŠ” í•™ìƒì€ ëª‡ ëª…ì¸ê°€?

```lean
-- ì§‘í•© í¬ê¸°ë§Œìœ¼ë¡œ ê³„ì‚°
def csStudents : â„• := 25
def mathStudents : â„• := 13
def bothStudents : â„• := 8

-- í¬í•¨-ë°°ì œ ì ìš©
def eitherStudents : â„• := csStudents + mathStudents - bothStudents

#eval eitherStudents  -- 30

-- Lean 4 í˜•ì‹ì  ì¦ëª…
example : 25 + 13 - 8 = 30 := by norm_num
```

### 2.2 ì˜ˆì œ 2: 7 ë˜ëŠ” 11ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜ (Rosen ì˜ˆì œ 2)

> **ë¬¸ì œ**: 7 ë˜ëŠ” 11ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” 1000ì„ ì´ˆê³¼í•˜ì§€ ì•ŠëŠ” ì–‘ì˜ ì •ìˆ˜ëŠ” ëª‡ ê°œì¸ê°€?

í’€ì´:
- `A` = 7ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜: `âŒŠ1000/7âŒ‹ = 142`ê°œ
- `B` = 11ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜: `âŒŠ1000/11âŒ‹ = 90`ê°œ
- `A âˆ© B` = 7ê³¼ 11 ëª¨ë‘ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜ (= 77ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜): `âŒŠ1000/77âŒ‹ = 12`ê°œ

```lean
-- ì§ì ‘ ê³„ì‚°
#eval 1000 / 7    -- 142
#eval 1000 / 11   -- 90
#eval 1000 / 77   -- 12 (7 Ã— 11 = 77)

-- í¬í•¨-ë°°ì œ
#eval 142 + 90 - 12  -- 220

-- Finsetìœ¼ë¡œ ì •í™•í•œ ê²€ì¦
def divBy (d n : â„•) : Finset â„• :=
  (Finset.range (n + 1)).filter (fun k => k > 0 && k % d == 0)

#eval (divBy 7 1000).card   -- 142
#eval (divBy 11 1000).card  -- 90
#eval ((divBy 7 1000) âˆ© (divBy 11 1000)).card  -- 12
#eval ((divBy 7 1000) âˆª (divBy 11 1000)).card  -- 220 âœ“
```

### 2.3 ì˜ˆì œ 3: ì„¸ ê³¼ëª© (Rosen ì˜ˆì œ 3)

> **ë¬¸ì œ**: 1807ëª…ì˜ ì‹ ì…ìƒ ì¤‘ 453ëª…ì€ ì»´í“¨í„°ê³¼í•™, 567ëª…ì€ ìˆ˜í•™, 299ëª…ì€ ì–‘ìª½ ëª¨ë‘ë¥¼ ìˆ˜ê°•í•œë‹¤. ì»´í“¨í„°ê³¼í•™ ë˜ëŠ” ìˆ˜í•™ì„ ìˆ˜ê°•í•˜ì§€ ì•ŠëŠ” í•™ìƒì€?

```lean
-- |A âˆª B| = 453 + 567 - 299 = 721
-- ìˆ˜ê°•í•˜ì§€ ì•ŠëŠ” í•™ìƒ = 1807 - 721 = 1086

example : 1807 - (453 + 567 - 299) = 1086 := by norm_num
```

---

## 3. ì„¸ ì§‘í•©ì˜ í¬í•¨-ë°°ì œ

### 3.1 ê³µì‹

ë‘ ì§‘í•©ìœ¼ë¡œëŠ” ë¶€ì¡±í•  ë•Œê°€ ë§ë‹¤. ì„¸ ì§‘í•© `A`, `B`, `C`ì˜ í•©ì§‘í•© í¬ê¸°ëŠ”:

> $$|A \cup B \cup C| = |A| + |B| + |C| - |A \cap B| - |A \cap C| - |B \cap C| + |A \cap B \cap C|$$

**ì™œ ì´ë ‡ê²Œ ë˜ëŠ”ê°€?** ë²¤ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ìƒê°í•´ ë³´ì:

1. `|A| + |B| + |C|`ë¡œ ì‹œì‘í•˜ë©´, **ë‘ ì§‘í•©ì—ë§Œ** ì†í•˜ëŠ” ì›ì†ŒëŠ” 2ë²ˆ, **ì„¸ ì§‘í•© ëª¨ë‘**ì— ì†í•˜ëŠ” ì›ì†ŒëŠ” 3ë²ˆ ì„¸ì–´ì§„ë‹¤.
2. `-|A âˆ© B| - |A âˆ© C| - |B âˆ© C|`ë¡œ ë‘ ì§‘í•©ì”©ì˜ êµì§‘í•©ì„ ë¹¼ë©´, ë‘ ì§‘í•©ì—ë§Œ ì†í•˜ëŠ” ì›ì†ŒëŠ” ì •í™•íˆ 1ë²ˆ, ì„¸ ì§‘í•© ëª¨ë‘ì— ì†í•˜ëŠ” ì›ì†ŒëŠ” `3 - 3 = 0`ë²ˆì´ ëœë‹¤.
3. `+|A âˆ© B âˆ© C|`ë¡œ ì„¸ ì§‘í•©ì˜ êµì§‘í•©ì„ ë‹¤ì‹œ ë”í•˜ë©´, ì„¸ ì§‘í•© ëª¨ë‘ì— ì†í•˜ëŠ” ì›ì†Œë„ ì •í™•íˆ 1ë²ˆ ì„¸ì–´ì§„ë‹¤.

> ğŸ’ **ë¹„ìœ **: "ë”í•˜ê³  â†’ ë¹¼ê³  â†’ ë‹¤ì‹œ ë”í•˜ê¸°"ë¥¼ ë°˜ë³µí•˜ë©´ì„œ, ëª¨ë“  ì›ì†Œê°€ ì •í™•íˆ í•œ ë²ˆë§Œ ì„¸ì–´ì§€ë„ë¡ ì¡°ì •í•˜ëŠ” ê²ƒì´ë‹¤!

### 3.2 ì˜ˆì œ 4: ì„¸ ì–¸ì–´ ìˆ˜ê°• (Rosen ì˜ˆì œ 4)

> **ë¬¸ì œ**: 1232ëª…ì€ ìŠ¤í˜ì¸ì–´, 879ëª…ì€ í”„ë‘ìŠ¤ì–´, 114ëª…ì€ ëŸ¬ì‹œì•„ì–´ë¥¼ ìˆ˜ê°•í•œë‹¤.  
> ìŠ¤í˜ì¸ì–´âˆ©í”„ë‘ìŠ¤ì–´ = 103, ìŠ¤í˜ì¸ì–´âˆ©ëŸ¬ì‹œì•„ì–´ = 23, í”„ë‘ìŠ¤ì–´âˆ©ëŸ¬ì‹œì•„ì–´ = 14  
> ì„¸ ì–¸ì–´ ì¤‘ í•˜ë‚˜ë¥¼ ìˆ˜ê°•í•˜ëŠ” í•™ìƒì´ 2092ëª…ì´ë©´, ì„¸ ì–¸ì–´ ëª¨ë‘ë¥¼ ìˆ˜ê°•í•˜ëŠ” í•™ìƒì€?

```lean
-- |S âˆª F âˆª R| = |S| + |F| + |R| - |Sâˆ©F| - |Sâˆ©R| - |Fâˆ©R| + |Sâˆ©Fâˆ©R|
-- 2092 = 1232 + 879 + 114 - 103 - 23 - 14 + |Sâˆ©Fâˆ©R|
-- 2092 = 2085 + |Sâˆ©Fâˆ©R|
-- |Sâˆ©Fâˆ©R| = 7

example : 2092 = 1232 + 879 + 114 - 103 - 23 - 14 + 7 := by norm_num

-- ë˜ëŠ” ì—­ìœ¼ë¡œ:
example : 1232 + 879 + 114 - 103 - 23 - 14 + 7 = 2092 := by norm_num
```

```lean
-- Lean 4 Finsetìœ¼ë¡œ ì„¸ ì§‘í•© í¬í•¨-ë°°ì œ ì¦ëª…
theorem inclusion_exclusion_three
    {Î± : Type*} [DecidableEq Î±]
    (A B C : Finset Î±) :
    (A âˆª B âˆª C).card =
      A.card + B.card + C.card
      - (A âˆ© B).card - (A âˆ© C).card - (B âˆ© C).card
      + (A âˆ© B âˆ© C).card := by
  sorry  -- Mathlibì˜ card_unionê³¼ ê´€ë ¨ ë³´ì¡°ì •ë¦¬ë“¤ë¡œ ì¦ëª… ê°€ëŠ¥
```

---

## 4. nê°œ ì§‘í•©ì˜ í¬í•¨-ë°°ì œ ì›ë¦¬ (ì •ë¦¬ 1)

### 4.1 ì¼ë°˜í™”ëœ ê³µì‹

> **ì •ë¦¬ 1** (í¬í•¨-ë°°ì œ ì›ë¦¬):  
> `Aâ‚, Aâ‚‚, ..., Aâ‚™`ì´ ìœ í•œì§‘í•©ì´ë¼ í•˜ì. ê·¸ëŸ¬ë©´:
>
> $$|A_1 \cup A_2 \cup \cdots \cup A_n| = \sum_{i} |A_i| - \sum_{i<j} |A_i \cap A_j| + \sum_{i<j<k} |A_i \cap A_j \cap A_k| - \cdots + (-1)^{n+1}|A_1 \cap A_2 \cap \cdots \cap A_n|$$

ì´ ê³µì‹ì€ **êµëŒ€ í•©**(alternating sum)ì˜ í˜•íƒœì´ë‹¤:
- í™€ìˆ˜ ê°œì˜ ì§‘í•© êµì§‘í•© â†’ **ë”í•œë‹¤** (+)
- ì§ìˆ˜ ê°œì˜ ì§‘í•© êµì§‘í•© â†’ **ëº€ë‹¤** (-)

### 4.2 ê³µì‹ì˜ í•­ ìˆ˜

`n`ê°œì˜ ì§‘í•©ì— ëŒ€í•œ í¬í•¨-ë°°ì œ ê³µì‹ì—ëŠ” `2â¿ - 1`ê°œì˜ í•­ì´ ìˆë‹¤. (ê³µì§‘í•©ì„ ì œì™¸í•œ ëª¨ë“  ë¶€ë¶„ì§‘í•©ì— ëŒ€í•´ í•˜ë‚˜ì”©)

- `n = 2`: `2Â² - 1 = 3`ê°œì˜ í•­ (`|A|, |B|, |Aâˆ©B|`)
- `n = 3`: `2Â³ - 1 = 7`ê°œì˜ í•­
- `n = 4`: `2â´ - 1 = 15`ê°œì˜ í•­

### 4.3 ì¦ëª…ì˜ í•µì‹¬ ì•„ì´ë””ì–´

ì¦ëª…ì˜ í•µì‹¬ì€ "ê° ì›ì†Œê°€ ì •í™•íˆ í•œ ë²ˆë§Œ ì„¸ì–´ì§„ë‹¤"ëŠ” ê²ƒì´ë‹¤.

ì–´ë–¤ ì›ì†Œ `a`ê°€ ì •í™•íˆ `r`ê°œì˜ ì§‘í•©ì— ì†í•œë‹¤ê³  í•˜ì (`1 â‰¤ r â‰¤ n`). ê·¸ëŸ¬ë©´ ì´ ì›ì†ŒëŠ” ìš°ë³€ì—ì„œ:

$$C(r, 1) - C(r, 2) + C(r, 3) - \cdots + (-1)^{r+1}C(r, r)$$

ë²ˆ ì„¸ì–´ì§„ë‹¤. ì´í•­ ì •ë¦¬ì— ì˜í•´ ì´ ê°’ì€:

$$1 - [C(r, 0) - C(r, 1) + C(r, 2) - \cdots + (-1)^r C(r, r)] = 1 - (1 - 1)^r = 1 - 0 = 1$$

ë”°ë¼ì„œ ëª¨ë“  ì›ì†Œê°€ ì •í™•íˆ í•œ ë²ˆ ì„¸ì–´ì§„ë‹¤! âˆ

```lean
-- ì¦ëª…ì˜ í•µì‹¬ ë³´ì¡°ì •ë¦¬: êµëŒ€ ì´í•­ í•© = 0
-- C(r,0) - C(r,1) + C(r,2) - ... + (-1)^r * C(r,r) = 0 (r > 0)
theorem alternating_binom_sum (r : â„•) (hr : r > 0) :
    (Finset.range (r + 1)).sum (fun k => (-1 : â„¤) ^ k * (Nat.choose r k : â„¤)) = 0 := by
  sorry  -- ì´í•­ ì •ë¦¬ (1 + (-1))^r = 0^r = 0

-- êµ¬ì²´ì  ê²€ì¦
-- r = 1: C(1,0) - C(1,1) = 1 - 1 = 0 âœ“
-- r = 2: C(2,0) - C(2,1) + C(2,2) = 1 - 2 + 1 = 0 âœ“
-- r = 3: C(3,0) - C(3,1) + C(3,2) - C(3,3) = 1 - 3 + 3 - 1 = 0 âœ“

example : (1 : â„¤) - 1 = 0 := by norm_num
example : (1 : â„¤) - 2 + 1 = 0 := by norm_num
example : (1 : â„¤) - 3 + 3 - 1 = 0 := by norm_num
```

---

## 5. ì˜ˆì œ 5: ë„¤ ì§‘í•©ì˜ í•©ì§‘í•© (Rosen ì˜ˆì œ 5)

> **ë¬¸ì œ**: ë„¤ ì§‘í•©ì˜ í•©ì§‘í•©ì— ìˆëŠ” ì›ì†Œì˜ ìˆ˜ì— ëŒ€í•œ ê³µì‹ì„ ì œì‹œí•˜ë¼.

í¬í•¨-ë°°ì œ ì›ë¦¬ì— ì˜í•˜ë©´:

$$|A_1 \cup A_2 \cup A_3 \cup A_4| = |A_1| + |A_2| + |A_3| + |A_4|$$
$$- |A_1 \cap A_2| - |A_1 \cap A_3| - |A_1 \cap A_4| - |A_2 \cap A_3| - |A_2 \cap A_4| - |A_3 \cap A_4|$$
$$+ |A_1 \cap A_2 \cap A_3| + |A_1 \cap A_2 \cap A_4| + |A_1 \cap A_3 \cap A_4| + |A_2 \cap A_3 \cap A_4|$$
$$- |A_1 \cap A_2 \cap A_3 \cap A_4|$$

ì´ ê³µì‹ì€ `{Aâ‚, Aâ‚‚, Aâ‚ƒ, Aâ‚„}`ì˜ ê³µì§‘í•©ì´ ì•„ë‹Œ ëª¨ë“  ë¶€ë¶„ì§‘í•©ì— ëŒ€í•´ í•˜ë‚˜ì˜ í•­ì„ ê°€ì§€ë©°, ì´ `2â´ - 1 = 15`ê°œì˜ í•­ì´ ìˆë‹¤.

```lean
-- ë„¤ ì§‘í•©ì˜ í¬í•¨-ë°°ì œë¥¼ Lean 4ë¡œ ì§ì ‘ ê³„ì‚°í•˜ëŠ” ì˜ˆì‹œ
def S1 : Finset â„• := {1, 2, 3, 4, 5, 6, 7, 8}
def S2 : Finset â„• := {2, 4, 6, 8, 10, 12}
def S3 : Finset â„• := {3, 6, 9, 12, 15}
def S4 : Finset â„• := {5, 10, 15, 20}

-- ì§ì ‘ í•©ì§‘í•© ê³„ì‚°
#eval (S1 âˆª S2 âˆª S3 âˆª S4).card  -- 15

-- í¬í•¨-ë°°ì œë¡œ ê³„ì‚°
#eval S1.card + S2.card + S3.card + S4.card
    - (S1 âˆ© S2).card - (S1 âˆ© S3).card - (S1 âˆ© S4).card
    - (S2 âˆ© S3).card - (S2 âˆ© S4).card - (S3 âˆ© S4).card
    + (S1 âˆ© S2 âˆ© S3).card + (S1 âˆ© S2 âˆ© S4).card
    + (S1 âˆ© S3 âˆ© S4).card + (S2 âˆ© S3 âˆ© S4).card
    - (S1 âˆ© S2 âˆ© S3 âˆ© S4).card
-- 15 âœ“
```

---

## 6. í¬í•¨-ë°°ì œì˜ ë‹¤ë¥¸ í˜•ì‹: "ì†ì„±ì´ ì—†ëŠ”" ì›ì†Œ ì„¸ê¸°

### 6.1 ì—¬ì‚¬ê±´ìœ¼ë¡œì˜ ë³€í™˜ (Rosen 8.6ì ˆ)

í¬í•¨-ë°°ì œë¥¼ ì‚¬ìš©í•  ë•Œ, ì¢…ì¢… "**ì†ì„± Pâ‚, Pâ‚‚, ..., Pâ‚™ ì¤‘ ì–´ëŠ ê²ƒë„ ê°–ì§€ ì•ŠëŠ”** ì›ì†Œì˜ ìˆ˜"ë¥¼ êµ¬í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆë‹¤.

ì „ì²´ ì§‘í•©ì˜ í¬ê¸°ë¥¼ `N`ì´ë¼ í•˜ë©´:

> $$N(P_1'P_2' \cdots P_n') = N - |A_1 \cup A_2 \cup \cdots \cup A_n|$$

ì—¬ê¸°ì„œ `Aáµ¢`ëŠ” ì†ì„± `Páµ¢`ë¥¼ ê°€ì§„ ì›ì†Œë“¤ì˜ ì§‘í•©ì´ë‹¤.

í¬í•¨-ë°°ì œë¥¼ ëŒ€ì…í•˜ë©´:

> $$N(P_1'P_2' \cdots P_n') = N - \sum |A_i| + \sum |A_i \cap A_j| - \cdots + (-1)^n |A_1 \cap \cdots \cap A_n|$$

### 6.2 ì‘ìš©: ì˜¤ì¼ëŸ¬ì˜ í”¼ í•¨ìˆ˜ (Euler's Totient Function)

`n`ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ì–‘ì˜ ì •ìˆ˜ ì¤‘ `n`ê³¼ ì„œë¡œì†Œì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ **ì˜¤ì¼ëŸ¬ì˜ í”¼ í•¨ìˆ˜**(Euler's totient function) `Ï†(n)`ì´ë¼ í•œë‹¤.

í¬í•¨-ë°°ì œë¥¼ ì´ìš©í•˜ë©´:
- `n = pâ‚^aâ‚ Â· pâ‚‚^aâ‚‚ Â· ... Â· pâ‚–^aâ‚–` (ì†Œì¸ìˆ˜ ë¶„í•´)ì¼ ë•Œ
- `Ï†(n) = n Â· (1 - 1/pâ‚)(1 - 1/pâ‚‚)Â·Â·Â·(1 - 1/pâ‚–)`

```lean
-- ì˜¤ì¼ëŸ¬ì˜ í”¼ í•¨ìˆ˜ ì§ì ‘ êµ¬í˜„
def eulerPhi (n : â„•) : â„• :=
  if n â‰¤ 1 then n
  else (Finset.range n).filter (fun k => k > 0 && Nat.gcd k n == 1) |>.card

#eval eulerPhi 12   -- 4 (1, 5, 7, 11ì´ 12ì™€ ì„œë¡œì†Œ)
#eval eulerPhi 30   -- 8
#eval eulerPhi 7    -- 6 (ì†Œìˆ˜ì´ë¯€ë¡œ 1~6 ëª¨ë‘)

-- í¬í•¨-ë°°ì œë¡œ Ï†(12) ê³„ì‚°
-- 12 = 2Â² Ã— 3
-- 1~12 ì¤‘ 2ì˜ ë°°ìˆ˜: 6ê°œ, 3ì˜ ë°°ìˆ˜: 4ê°œ, 6ì˜ ë°°ìˆ˜: 2ê°œ
-- 2 ë˜ëŠ” 3ì˜ ë°°ìˆ˜: 6 + 4 - 2 = 8ê°œ
-- ì„œë¡œì†Œ: 12 - 8 = 4 âœ“
example : 12 - (6 + 4 - 2) = 4 := by norm_num
```

---

## 7. Lean 4ì—ì„œì˜ í¬í•¨-ë°°ì œ ìƒì„¸ êµ¬í˜„

### 7.1 ë‘ ì§‘í•© í¬í•¨-ë°°ì œ ì™„ì „í•œ ì¦ëª…

```lean
-- Lean 4ì—ì„œ ë‘ ì§‘í•©ì˜ í¬í•¨-ë°°ì œ ì¦ëª…
-- Mathlibì˜ ì •ë¦¬ë¥¼ ì§ì ‘ ì‚¬ìš©
theorem ie_two {Î± : Type*} [DecidableEq Î±] (A B : Finset Î±) :
    (A âˆª B).card + (A âˆ© B).card = A.card + B.card :=
  Finset.card_union_add_card_inter A B

-- ë³€í˜•: |A âˆª B| = |A| + |B| - |A âˆ© B|
-- ìì—°ìˆ˜ ëº„ì…ˆ ì£¼ì˜! í•­ìƒ |A âˆ© B| â‰¤ |A| + |B|ì´ë¯€ë¡œ ì•ˆì „
theorem ie_two_sub {Î± : Type*} [DecidableEq Î±] (A B : Finset Î±) :
    (A âˆª B).card = A.card + B.card - (A âˆ© B).card := by
  have h := Finset.card_union_add_card_inter A B
  omega
```

### 7.2 `â†’`(if)ì™€ `â†”`(if and only if)ì˜ ì°¨ì´

í¬í•¨-ë°°ì œ ì›ë¦¬ë¥¼ í•™ìŠµí•˜ë©´ì„œ, ë…¼ë¦¬ ê¸°í˜¸ `â†’`ì™€ `â†”`ì˜ ì°¨ì´ë¥¼ ëª…í™•íˆ í•˜ì.

#### `â†’` (if, **ì¡°ê±´ë¬¸**)

`P â†’ Q`ëŠ” "`P`ì´ë©´ `Q`ì´ë‹¤"ë¥¼ ëœ»í•œë‹¤. **í•œ ë°©í–¥**ë§Œ ì„±ë¦½í•œë‹¤.

- ì˜ˆ: `x âˆˆ A âˆ© B â†’ x âˆˆ A` (êµì§‘í•©ì— ì†í•˜ë©´ Aì— ì†í•œë‹¤)
- ì—­(`Q â†’ P`)ì€ ë°˜ë“œì‹œ ì„±ë¦½í•˜ì§€ ì•ŠëŠ”ë‹¤!

#### `â†”` (if and only if, **ìŒë°©í–¥ ì¡°ê±´ë¬¸**)

`P â†” Q`ëŠ” "`P`ì´ë©´ `Q`ì´ê³  `Q`ì´ë©´ `P`ì´ë‹¤"ë¥¼ ëœ»í•œë‹¤. **ì–‘ ë°©í–¥** ëª¨ë‘ ì„±ë¦½í•œë‹¤.

- ì˜ˆ: `x âˆˆ A âˆª B â†” x âˆˆ A âˆ¨ x âˆˆ B` (í•©ì§‘í•©ì˜ ì •ì˜)
- `P â†” Q`ëŠ” `(P â†’ Q) âˆ§ (Q â†’ P)`ì™€ ê°™ë‹¤!

```lean
-- â†’ (if): í•œ ë°©í–¥
example {Î± : Type*} [DecidableEq Î±] {x : Î±} {A B : Finset Î±}
    (h : x âˆˆ A âˆ© B) : x âˆˆ A := by
  exact Finset.mem_inter.mp h |>.1

-- â†” (iff): ì–‘ ë°©í–¥
example {Î± : Type*} [DecidableEq Î±] {x : Î±} {A B : Finset Î±} :
    x âˆˆ A âˆª B â†” x âˆˆ A âˆ¨ x âˆˆ B :=
  Finset.mem_union

-- â†”ë¥¼ â†’ ë‘ ê°œë¡œ ë¶„í•´
example {P Q : Prop} (h : P â†” Q) : P â†’ Q := h.mp
example {P Q : Prop} (h : P â†” Q) : Q â†’ P := h.mpr

-- Lean 4ì—ì„œ â†” ì¦ëª…í•˜ê¸°
example {P Q : Prop} (hpq : P â†’ Q) (hqp : Q â†’ P) : P â†” Q :=
  âŸ¨hpq, hqpâŸ©
```

### 7.3 lemma(ì‘ì€ ì •ë¦¬)ì™€ theorem(í° ì •ë¦¬)ì˜ ê´€ê³„

Lean 4ì—ì„œ `lemma`ì™€ `theorem`ì€ **ê¸°ëŠ¥ì ìœ¼ë¡œ ë™ì¼**í•˜ë‹¤! ë‘˜ ë‹¤ ëª…ì œì˜ ì¦ëª…ì„ ë‚˜íƒ€ë‚¸ë‹¤. ì°¨ì´ëŠ” **ê´€ë¡€**(convention)ì— ìˆë‹¤:

| êµ¬ë¶„ | `lemma` | `theorem` |
|------|---------|-----------|
| **ì—­í• ** | í° ì •ë¦¬ë¥¼ ì¦ëª…í•˜ê¸° ìœ„í•œ **ë³´ì¡° ë‹¨ê³„** | ê·¸ ìì²´ë¡œ ì¤‘ìš”í•œ **ì£¼ìš” ê²°ê³¼** |
| **ë¹„ìœ ** | ê±´ë¬¼ì˜ **ë²½ëŒ** ğŸ§± | ì™„ì„±ëœ **ê±´ë¬¼** ğŸ›ï¸ |
| **ìˆ˜í•™ì—ì„œ** | "ë³´ì¡° ì •ë¦¬" (auxiliary result) | "ì •ë¦¬" (main result) |
| **Lean 4ì—ì„œ** | `lemma foo : ...` | `theorem bar : ...` |

```lean
-- lemma: í¬í•¨-ë°°ì œë¥¼ ì¦ëª…í•˜ê¸° ìœ„í•œ ë³´ì¡° ë‹¨ê³„
lemma inter_subset_union {Î± : Type*} [DecidableEq Î±] (A B : Finset Î±) :
    (A âˆ© B) âŠ† (A âˆª B) := by
  intro x hx
  exact Finset.mem_union_left B (Finset.mem_inter.mp hx |>.1)

-- theorem: í¬í•¨-ë°°ì œ ì›ë¦¬ ìì²´ (ì´ lemmaë¥¼ ì‚¬ìš©)
theorem inclusion_exclusion_card {Î± : Type*} [DecidableEq Î±] (A B : Finset Î±) :
    (A âˆª B).card = A.card + B.card - (A âˆ© B).card := by
  have h := Finset.card_union_add_card_inter A B
  omega
```

> ğŸ’¡ **ìš”ì•½**: `lemma`ëŠ” ë²½ëŒ, `theorem`ì€ ê±´ë¬¼ì´ë‹¤. ì‹¤ì œë¡œ Lean 4 ì»´íŒŒì¼ëŸ¬ëŠ” ì´ ë‘˜ì„ êµ¬ë¶„í•˜ì§€ ì•Šì§€ë§Œ, ì¸ê°„ ë…ìë¥¼ ìœ„í•´ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ìŠµê´€ì´ë‹¤.

---

## 8. ì¹˜í™˜/ëŒ€ì… = ìŠˆí¼í¬ì§€ì…˜ (Substitution = Superposition)

### 8.1 ì¹˜í™˜ì´ë€?

**ì¹˜í™˜**(substitution) ë˜ëŠ” **ëŒ€ì…**ì´ë€, ìˆ˜ì‹ì—ì„œ ë³€ìˆ˜ë¥¼ ë‹¤ë¥¸ ì‹ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤. Lean 4ì—ì„œëŠ” `rw` (rewrite) ì „ìˆ ì´ ì´ ì—­í• ì„ í•œë‹¤.

> ğŸ’ **ë¹„ìœ **: ë ˆì‹œí”¼ì—ì„œ "ë°€ê°€ë£¨"ë¥¼ "ìŒ€ê°€ë£¨"ë¡œ ë°”ê¾¸ëŠ” ê²ƒê³¼ ê°™ë‹¤. ë ˆì‹œí”¼ì˜ êµ¬ì¡°ëŠ” ê°™ì§€ë§Œ, ì¬ë£Œê°€ ë°”ë€ë‹¤.

### 8.2 Lean 4ì—ì„œì˜ ì¹˜í™˜: `rw` ì „ìˆ 

```lean
-- ê¸°ë³¸ ì¹˜í™˜ ì˜ˆì‹œ
-- h : a = b ê°€ ìˆì„ ë•Œ, ëª©í‘œì—ì„œ aë¥¼ bë¡œ ë°”ê¾¼ë‹¤
example (a b c : â„•) (h : a = b) : a + c = b + c := by
  rw [h]  -- aë¥¼ bë¡œ ì¹˜í™˜

-- ì—¬ëŸ¬ ë²ˆ ì¹˜í™˜
example (a b c : â„•) (h1 : a = b) (h2 : b = c) : a = c := by
  rw [h1]  -- a â†’ b
  rw [h2]  -- b â†’ c (ë˜ëŠ” exact h2)

-- ì—­ë°©í–¥ ì¹˜í™˜: rw [â† h]
example (a b : â„•) (h : a = b) : b = a := by
  rw [â† h]  -- b â†’ a (ì—­ë°©í–¥)
```

### 8.3 ìŠˆí¼í¬ì§€ì…˜ê³¼ì˜ ê´€ê³„

**ìŠˆí¼í¬ì§€ì…˜**(superposition)ì€ ìë™ ì •ë¦¬ ì¦ëª…ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ë¡œ, ë‘ ì‹ì„ **í†µí•©**(unification)í•˜ì—¬ í•˜ë‚˜ì˜ ìƒˆë¡œìš´ ì‹ì„ ë§Œë“œëŠ” ê³¼ì •ì´ë‹¤. ë³¸ì§ˆì ìœ¼ë¡œ ì¹˜í™˜ê³¼ ê°™ì€ ì•„ì´ë””ì–´ì´ë‹¤:

1. **ì¹˜í™˜**(substitution): "ì´ ë³€ìˆ˜ë¥¼ ì € ì‹ìœ¼ë¡œ ë°”ê¿”ë¼"
2. **ìŠˆí¼í¬ì§€ì…˜**(superposition): "ë‘ ë“±ì‹ì„ ê²°í•©í•˜ì—¬ ìƒˆ ë“±ì‹ì„ ìœ ë„í•˜ë¼"

```lean
-- ìŠˆí¼í¬ì§€ì…˜ì˜ ì˜ˆ: ë‘ ë“±ì‹ì„ ê²°í•©
-- h1: f(a) = g(b)
-- h2: g(b) = c
-- ê²°ë¡ : f(a) = c (h1ê³¼ h2ë¥¼ "í•©ì„±")

example (f g : â„• â†’ â„•) (a b c : â„•)
    (h1 : f a = g b) (h2 : g b = c) : f a = c := by
  rw [h1, h2]  -- ì¹˜í™˜ ë‘ ë²ˆ = ìŠˆí¼í¬ì§€ì…˜ í•œ ë²ˆ

-- calc ë¸”ë¡ìœ¼ë¡œë„ ê°™ì€ ê²ƒì„ í‘œí˜„
example (f g : â„• â†’ â„•) (a b c : â„•)
    (h1 : f a = g b) (h2 : g b = c) : f a = c :=
  calc f a = g b := h1
    _ = c := h2
```

---

## 9. ì—°ìŠµ ë¬¸ì œ

### ì—°ìŠµ 9.1: ë‘ ì§‘í•© í¬í•¨-ë°°ì œ [ê´„í˜¸ ì±„ìš°ê¸°]

> ëŒ€í•™ì—ì„œ 345ëª…ì´ ë¯¸ì ë¶„í•™, 212ëª…ì´ ì´ì‚°ìˆ˜í•™, 188ëª…ì´ ë‘ ê³¼ëª© ëª¨ë‘ë¥¼ ìˆ˜ê°•í–ˆë‹¤. ë¯¸ì ë¶„í•™ ë˜ëŠ” ì´ì‚°ìˆ˜í•™ì„ ìˆ˜ê°•í•œ í•™ìƒì€?

```lean
-- |A âˆª B| = |A| + |B| - |A âˆ© B|
-- = 345 + 212 - 188
-- = (     )

example : 345 + 212 - 188 = (  sorry  ) := by norm_num
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```lean
example : 345 + 212 - 188 = 369 := by norm_num
```

</details>

---

### ì—°ìŠµ 9.2: ì„¸ ì§‘í•© í¬í•¨-ë°°ì œ [ê´„í˜¸ ì±„ìš°ê¸°]

> ê° ì§‘í•©ì— 100ê°œì˜ ì›ì†Œê°€ ìˆê³ , ì§‘í•©ë“¤ì˜ ê° ìŒì´ 50ê°œì˜ ê³µí†µ ì›ì†Œë¥¼ ê°–ê³ , ì„¸ ì§‘í•© ëª¨ë‘ì— 25ê°œì˜ ì›ì†Œê°€ ìˆì„ ë•Œ, `|Aâ‚ âˆª Aâ‚‚ âˆª Aâ‚ƒ|`ì„ êµ¬í•˜ë¼.

```lean
-- |Aâ‚ âˆª Aâ‚‚ âˆª Aâ‚ƒ| = |Aâ‚| + |Aâ‚‚| + |Aâ‚ƒ| - |Aâ‚âˆ©Aâ‚‚| - |Aâ‚âˆ©Aâ‚ƒ| - |Aâ‚‚âˆ©Aâ‚ƒ| + |Aâ‚âˆ©Aâ‚‚âˆ©Aâ‚ƒ|
-- = 100 + 100 + 100 - 50 - 50 - 50 + 25
-- = (     )

example : 100 + 100 + 100 - 50 - 50 - 50 + 25 = (  sorry  ) := by norm_num
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```lean
example : 100 + 100 + 100 - 50 - 50 - 50 + 25 = 175 := by norm_num
```

</details>

---

### ì—°ìŠµ 9.3: Finset í¬í•¨-ë°°ì œ [ê´„í˜¸ ì±„ìš°ê¸°]

> Lean 4 Finsetì„ ì‚¬ìš©í•˜ì—¬ êµ¬ì²´ì ì¸ ì§‘í•©ì˜ í¬í•¨-ë°°ì œë¥¼ í™•ì¸í•˜ë¼.

```lean
def X : Finset â„• := {1, 2, 3, 4, 5, 6}
def Y : Finset â„• := {4, 5, 6, 7, 8, 9}

-- X.card = (     )
-- Y.card = (     )
-- (X âˆ© Y).card = (     )
-- (X âˆª Y).card = (     )
-- X.card + Y.card - (X âˆ© Y).card = (     )

#eval X.card
#eval Y.card
#eval (X âˆ© Y).card
#eval (X âˆª Y).card
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```
X.card = 6
Y.card = 6
(X âˆ© Y).card = 3  -- {4, 5, 6}
(X âˆª Y).card = 9  -- {1, 2, 3, 4, 5, 6, 7, 8, 9}
6 + 6 - 3 = 9 âœ“
```

</details>

---

### ì—°ìŠµ 9.4: â†’ ì™€ â†” êµ¬ë¶„ [ê´„í˜¸ ì±„ìš°ê¸°]

> ë‹¤ìŒ ì¤‘ `â†’`ë§Œ ì„±ë¦½í•˜ëŠ” ê²ƒê³¼ `â†”`ê°€ ì„±ë¦½í•˜ëŠ” ê²ƒì„ êµ¬ë¶„í•˜ë¼.

```lean
-- (1) x âˆˆ A âˆ© B (     ) x âˆˆ A    -- â†’ ë˜ëŠ” â†” ?
-- (2) x âˆˆ A âˆª B (     ) x âˆˆ A âˆ¨ x âˆˆ B  -- â†’ ë˜ëŠ” â†” ?
-- (3) A âŠ† B (     ) A âˆª B = B    -- â†’ ë˜ëŠ” â†” ?
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

1. `â†’` (í•œ ë°©í–¥ë§Œ): `x âˆˆ A âˆ© B â†’ x âˆˆ A`ëŠ” ì„±ë¦½í•˜ì§€ë§Œ, ì—­ì€ ì•„ë‹ˆë‹¤ (xê°€ Bì— ì—†ì„ ìˆ˜ ìˆë‹¤)
2. `â†”` (ì–‘ë°©í–¥): í•©ì§‘í•©ì˜ **ì •ì˜** ìì²´ì´ë‹¤
3. `â†”` (ì–‘ë°©í–¥): `A âŠ† B â†” A âˆª B = B`ëŠ” ì–‘ë°©í–¥ ëª¨ë‘ ì„±ë¦½í•œë‹¤

</details>

---

### ì—°ìŠµ 9.5: lemmaì™€ theorem ì—°ìŠµ [Skeleton]

> ë‹¤ìŒ ì½”ë“œì—ì„œ `lemma`ë¥¼ ë¨¼ì € ì¦ëª…í•œ í›„, ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ `theorem`ì„ ì¦ëª…í•˜ë¼.

```lean
-- ë³´ì¡° ì •ë¦¬: êµì§‘í•©ì€ ê° ì§‘í•©ì˜ ë¶€ë¶„ì§‘í•©
lemma inter_subset_left' {Î± : Type*} [DecidableEq Î±] (A B : Finset Î±) :
    A âˆ© B âŠ† A := by
  sorry

-- ë³´ì¡° ì •ë¦¬: ë¶€ë¶„ì§‘í•©ì´ë©´ í¬ê¸°ê°€ ì‘ê±°ë‚˜ ê°™ë‹¤
lemma card_le_of_subset' {Î± : Type*} [DecidableEq Î±] {s t : Finset Î±}
    (h : s âŠ† t) : s.card â‰¤ t.card := by
  sorry

-- ì£¼ ì •ë¦¬: êµì§‘í•©ì˜ í¬ê¸° â‰¤ ê° ì§‘í•©ì˜ í¬ê¸°
theorem inter_card_le {Î± : Type*} [DecidableEq Î±] (A B : Finset Î±) :
    (A âˆ© B).card â‰¤ A.card := by
  sorry  -- ìœ„ ë‘ lemmaë¥¼ ì‚¬ìš©
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```lean
lemma inter_subset_left' {Î± : Type*} [DecidableEq Î±] (A B : Finset Î±) :
    A âˆ© B âŠ† A :=
  Finset.inter_subset_left

lemma card_le_of_subset' {Î± : Type*} [DecidableEq Î±] {s t : Finset Î±}
    (h : s âŠ† t) : s.card â‰¤ t.card :=
  Finset.card_le_card h

theorem inter_card_le {Î± : Type*} [DecidableEq Î±] (A B : Finset Î±) :
    (A âˆ© B).card â‰¤ A.card :=
  card_le_of_subset' (inter_subset_left' A B)
```

</details>

---

### ì—°ìŠµ 9.6: 3, 17, 35ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜ [Sorry ë„ì „]

> 1000ì„ ë„˜ì§€ ì•Šìœ¼ë©´ì„œ 3, 17 ë˜ëŠ” 35ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ì–‘ì˜ ì •ìˆ˜ì˜ ìˆ˜ë¥¼ êµ¬í•˜ë¼.

```lean
-- íŒíŠ¸: 3ê³¼ 17ì€ ì„œë¡œì†Œ, 3ê³¼ 35ëŠ” ê³µì•½ìˆ˜ â‰  1 (ë‘˜ë‹¤ 1ì„ ì œì™¸í•˜ë©´ ì—†ìŒ... ì•„ ì ê¹)
-- 3ê³¼ 35ì˜ ìµœì†Œê³µë°°ìˆ˜ = 105, 17ê³¼ 35ì˜ ìµœì†Œê³µë°°ìˆ˜ = 595
-- 3ê³¼ 17ì˜ ìµœì†Œê³µë°°ìˆ˜ = 51
-- 3, 17, 35ì˜ ìµœì†Œê³µë°°ìˆ˜ = lcm(51, 35) = 1785

-- Finsetìœ¼ë¡œ ì •í™•í•œ ë‹µ êµ¬í•˜ê¸°
def divByAny (n : â„•) : Finset â„• :=
  (Finset.range (n + 1)).filter (fun k =>
    k > 0 && (k % 3 == 0 || k % 17 == 0 || k % 35 == 0))

-- #eval (divByAny 1000).card  -- ì •ë‹µì€?

theorem divisible_count : (divByAny 1000).card = sorry := by
  sorry
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```lean
-- |A| = âŒŠ1000/3âŒ‹ = 333
-- |B| = âŒŠ1000/17âŒ‹ = 58
-- |C| = âŒŠ1000/35âŒ‹ = 28
-- |Aâˆ©B| = âŒŠ1000/51âŒ‹ = 19  (lcm(3,17) = 51)
-- |Aâˆ©C| = âŒŠ1000/105âŒ‹ = 9  (lcm(3,35) = 105)
-- |Bâˆ©C| = âŒŠ1000/595âŒ‹ = 1  (lcm(17,35) = 595)
-- |Aâˆ©Bâˆ©C| = âŒŠ1000/1785âŒ‹ = 0  (lcm(3,17,35) = 1785)
--
-- |AâˆªBâˆªC| = 333 + 58 + 28 - 19 - 9 - 1 + 0 = 390

#eval (divByAny 1000).card  -- 390

theorem divisible_count : (divByAny 1000).card = 390 := by native_decide
```

</details>

---

### ì—°ìŠµ 9.7: ì˜¤ì¼ëŸ¬ í”¼ í•¨ìˆ˜ [Sorry ë„ì „]

> `Ï†(30)`ì„ í¬í•¨-ë°°ì œë¥¼ ì´ìš©í•˜ì—¬ ê³„ì‚°í•˜ê³ , Lean 4ë¡œ ê²€ì¦í•˜ë¼.

```lean
-- 30 = 2 Ã— 3 Ã— 5
-- 1~30 ì¤‘:
--   2ì˜ ë°°ìˆ˜: 15ê°œ, 3ì˜ ë°°ìˆ˜: 10ê°œ, 5ì˜ ë°°ìˆ˜: 6ê°œ
--   6ì˜ ë°°ìˆ˜: 5ê°œ, 10ì˜ ë°°ìˆ˜: 3ê°œ, 15ì˜ ë°°ìˆ˜: 2ê°œ
--   30ì˜ ë°°ìˆ˜: 1ê°œ
-- 2, 3, ë˜ëŠ” 5ì˜ ë°°ìˆ˜: 15 + 10 + 6 - 5 - 3 - 2 + 1 = 22
-- Ï†(30) = 30 - 22 = 8

theorem euler_phi_30 : eulerPhi 30 = 8 := by
  sorry
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```lean
theorem euler_phi_30 : eulerPhi 30 = 8 := by native_decide
```

</details>

---

### ì—°ìŠµ 9.8: êµëŒ€ ì´í•­ í•© [Sorry ë„ì „]

> `r = 4`ì¼ ë•Œ `C(4,0) - C(4,1) + C(4,2) - C(4,3) + C(4,4) = 0`ì„ Lean 4ë¡œ ì¦ëª…í•˜ë¼.

```lean
-- C(4,0) - C(4,1) + C(4,2) - C(4,3) + C(4,4)
-- = 1 - 4 + 6 - 4 + 1 = 0

theorem alt_binom_sum_4 :
    (1 : â„¤) - 4 + 6 - 4 + 1 = 0 := by
  sorry

-- Nat.choose ë²„ì „
theorem alt_binom_sum_4' :
    (Nat.choose 4 0 : â„¤) - (Nat.choose 4 1 : â„¤) + (Nat.choose 4 2 : â„¤)
    - (Nat.choose 4 3 : â„¤) + (Nat.choose 4 4 : â„¤) = 0 := by
  sorry
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```lean
theorem alt_binom_sum_4 :
    (1 : â„¤) - 4 + 6 - 4 + 1 = 0 := by norm_num

theorem alt_binom_sum_4' :
    (Nat.choose 4 0 : â„¤) - (Nat.choose 4 1 : â„¤) + (Nat.choose 4 2 : â„¤)
    - (Nat.choose 4 3 : â„¤) + (Nat.choose 4 4 : â„¤) = 0 := by native_decide
```

</details>

---

### ì—°ìŠµ 9.9: rw ì¹˜í™˜ ì—°ìŠµ [Skeleton]

> `rw` ì „ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒì„ ì¦ëª…í•˜ë¼.

```lean
-- (1) ê°„ë‹¨í•œ ì¹˜í™˜
example (a b c : â„•) (h1 : a = b + 1) (h2 : c = a + 2) : c = b + 3 := by
  sorry

-- (2) ì—­ë°©í–¥ ì¹˜í™˜
example (x y : â„•) (h : x + y = 10) : 10 = x + y := by
  sorry

-- (3) ì—°ì‡„ ì¹˜í™˜
example (a b c d : â„•) (h1 : a = b) (h2 : b = c) (h3 : c = d) : a = d := by
  sorry
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```lean
example (a b c : â„•) (h1 : a = b + 1) (h2 : c = a + 2) : c = b + 3 := by
  rw [h2, h1]; ring

example (x y : â„•) (h : x + y = 10) : 10 = x + y := by
  rw [â† h]  -- ë˜ëŠ” omega / exact h.symm

example (a b c d : â„•) (h1 : a = b) (h2 : b = c) (h3 : c = d) : a = d := by
  rw [h1, h2, h3]
```

</details>

---

### ì—°ìŠµ 9.10: ì¢…í•© ë¬¸ì œ [Sorry ë„ì „]

> **ë¬¸ì œ**: 270ëª…ì˜ ëŒ€í•™ìƒì— ëŒ€í•´:
> - ë¸Œë¤¼ì…€ ìŠ¤í”„ë¼ìš°íŠ¸ë¥¼ ì¢‹ì•„í•˜ëŠ” í•™ìƒ: 64ëª…
> - ë¸Œë¡œì½œë¦¬ë¥¼ ì¢‹ì•„í•˜ëŠ” í•™ìƒ: 94ëª…
> - ì»¬ë¦¬í”Œë¼ì›Œë¥¼ ì¢‹ì•„í•˜ëŠ” í•™ìƒ: 58ëª…
> - ë¸Œë¤¼ì…€ ìŠ¤í”„ë¼ìš°íŠ¸ì™€ ë¸Œë¡œì½œë¦¬ ëª¨ë‘: 26ëª…
> - ë¸Œë¤¼ì…€ ìŠ¤í”„ë¼ìš°íŠ¸ì™€ ì»¬ë¦¬í”Œë¼ì›Œ ëª¨ë‘: 28ëª…
> - ë¸Œë¡œì½œë¦¬ì™€ ì»¬ë¦¬í”Œë¼ì›Œ ëª¨ë‘: 22ëª…
> - ì„¸ ê°€ì§€ ëª¨ë‘: 14ëª…
>
> ì–´ë–¤ ì±„ì†Œë„ ì¢‹ì•„í•˜ì§€ ì•ŠëŠ” í•™ìƒì€?

```lean
-- |AâˆªBâˆªC| = 64 + 94 + 58 - 26 - 28 - 22 + 14 = ?
-- ì¢‹ì•„í•˜ì§€ ì•ŠëŠ” í•™ìƒ = 270 - |AâˆªBâˆªC| = ?

theorem vegetable_problem :
    270 - (64 + 94 + 58 - 26 - 28 - 22 + 14) = sorry := by
  sorry
```

<details>
<summary>ğŸ’¡ ë‹µ ë³´ê¸°</summary>

```lean
-- |AâˆªBâˆªC| = 64 + 94 + 58 - 26 - 28 - 22 + 14 = 154
-- ì¢‹ì•„í•˜ì§€ ì•ŠëŠ” í•™ìƒ = 270 - 154 = 116

theorem vegetable_problem :
    270 - (64 + 94 + 58 - 26 - 28 - 22 + 14) = 116 := by norm_num
```

</details>

---

## 10. ì‚¬ìš©ëœ Lean 4 ì „ìˆ  Â· í•¨ìˆ˜ ì •ë¦¬

### ì „ìˆ  ìš”ì•½

| ì „ìˆ  | ìš©ë„ | ì˜ˆì‹œ |
|------|------|------|
| `rw [h]` | `h : a = b`ë¡œ ëª©í‘œì˜ `a`ë¥¼ `b`ë¡œ ì¹˜í™˜ | `rw [h1, h2]` |
| `rw [â† h]` | ì—­ë°©í–¥ ì¹˜í™˜ (`b`ë¥¼ `a`ë¡œ) | `rw [â† h]` |
| `norm_num` | ìˆ˜ì¹˜ ê³„ì‚° ìë™ ì¦ëª… | `100 - 50 = 50` |
| `native_decide` | ê²°ì • ê°€ëŠ¥í•œ ëª…ì œ ìë™ ì¦ëª… | `Finset.card` ê³„ì‚° |
| `omega` | ìì—°ìˆ˜/ì •ìˆ˜ ì„ í˜• ë¶€ë“±ì‹ | `a + b - c = d` |
| `exact` | ì¦ëª… í•­ ì§ì ‘ ì œê³µ | `exact h.mp` |

### ê°œë… ìš”ì•½

| ê°œë… | Lean 4 | ì„¤ëª… |
|------|--------|------|
| í•©ì§‘í•© | `A âˆª B` | `Finset.union` |
| êµì§‘í•© | `A âˆ© B` | `Finset.inter` |
| í¬ê¸° | `A.card` | `Finset.card` |
| ë¶€ë¶„ì§‘í•© | `A âŠ† B` | `Finset.Subset` |
| í•„í„° | `s.filter p` | ì¡°ê±´ ë§Œì¡±í•˜ëŠ” ì›ì†Œë§Œ |
| ë²”ìœ„ | `Finset.range n` | `{0, 1, ..., n-1}` |

---

## 11. í•µì‹¬ ìš”ì•½

1. **í¬í•¨-ë°°ì œ ì›ë¦¬**ëŠ” í•©ì§‘í•©ì˜ í¬ê¸°ë¥¼ ê³„ì‚°í•  ë•Œ, ì¤‘ë³µ ê³„ì‚°ì„ ì²´ê³„ì ìœ¼ë¡œ ì œê±°í•˜ëŠ” ê³µì‹ì´ë‹¤.
2. ë‘ ì§‘í•©: `|A âˆª B| = |A| + |B| - |A âˆ© B|`
3. ì„¸ ì§‘í•©: `|AâˆªBâˆªC| = |A|+|B|+|C| - |Aâˆ©B|-|Aâˆ©C|-|Bâˆ©C| + |Aâˆ©Bâˆ©C|`
4. ì¼ë°˜ `n`ê°œ: "ë”í•˜ê³  â†’ ë¹¼ê³ "ë¥¼ êµëŒ€ë¡œ ë°˜ë³µí•˜ë©°, ê° ì›ì†Œê°€ ì •í™•íˆ 1ë²ˆ ì„¸ì–´ì§„ë‹¤.
5. **`â†’`(if)** ëŠ” í•œ ë°©í–¥, **`â†”`(iff)** ëŠ” ì–‘ ë°©í–¥ì˜ ë…¼ë¦¬ì  ê´€ê³„ì´ë‹¤.
6. **`lemma`** ëŠ” í° ì •ë¦¬ë¥¼ ìœ„í•œ ë²½ëŒ, **`theorem`** ì€ ì™„ì„±ëœ ê±´ë¬¼ì´ë‹¤. Lean 4ì—ì„œ ê¸°ëŠ¥ì€ ë™ì¼í•˜ë‹¤.
7. **ì¹˜í™˜**(substitution) = Lean 4ì˜ `rw` ì „ìˆ . ë“±ì‹ì„ ì´ìš©í•´ ì‹ì˜ ì¼ë¶€ë¥¼ êµì²´í•˜ëŠ” í•µì‹¬ ë„êµ¬ì´ë‹¤.
8. í¬í•¨-ë°°ì œì˜ ì‘ìš©: **ì˜¤ì¼ëŸ¬ í”¼ í•¨ìˆ˜**, ì „ì‚¬ í•¨ìˆ˜ì˜ ìˆ˜, êµë€(derangement) ë¬¸ì œ ë“±.

---

> **ë‹¤ìŒ íŒŒíŠ¸ ì˜ˆê³ **: Part 11-Eì—ì„œëŠ” **í¬í•¨-ë°°ì œì˜ ê³ ê¸‰ ì‘ìš©**(Rosen 8.6ì ˆ ë‚˜ë¨¸ì§€)ì„ ë‹¤ë£¬ë‹¤. ì „ì‚¬ í•¨ìˆ˜ì˜ ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ê³µì‹, **êµë€**(derangement, ì™„ì „ìˆœì—´) ë¬¸ì œ, ê·¸ë¦¬ê³  ì´ë¥¼ Lean 4ë¡œ í˜•ì‹í™”í•˜ëŠ” ë°©ë²•ì„ ë°°ìš´ë‹¤!
