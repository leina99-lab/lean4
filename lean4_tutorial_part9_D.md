# Lean 4 íŠœí† ë¦¬ì–¼ â€” Part 9-D: ìˆœì—´ê³¼ ì¡°í•© (Permutations and Combinations)

> **ì‹œë¦¬ì¦ˆ ìœ„ì¹˜**: Rosen ì´ì‚°ìˆ˜í•™ 8íŒ Â§6.3  
> **ì„ ìˆ˜ ì§€ì‹**: Part 9-A (ê³±ì…ˆÂ·ë§ì…ˆ ë²•ì¹™), Part 9-B (ëº„ì…ˆÂ·ë‚˜ëˆ—ì…ˆ ë²•ì¹™), Part 9-C (ë¹„ë‘˜ê¸°ì§‘ ì›ë¦¬)  
> **ëª©í‘œ**: **ìˆœì—´**(permutation)ê³¼ **ì¡°í•©**(combination)ì˜ ê°œë…ì„ ì´í•´í•˜ê³ , Lean 4ë¡œ ê´€ë ¨ ì •ë¦¬ë“¤ì„ ì¦ëª…í•œë‹¤.

---

## 9D.0 ì´ ì¥ì—ì„œ ë°°ìš¸ ê²ƒ

ì´ ì¥ì€ **ê³„ìˆ˜**(counting)ì˜ í•µì‹¬ ë„êµ¬ì¸ **ìˆœì—´**(permutation)ê³¼ **ì¡°í•©**(combination)ì„ ë‹¤ë£¬ë‹¤. ê°„ë‹¨íˆ ë§í•˜ë©´:

- **ìˆœì—´**: ì›ì†Œë“¤ì„ **ìˆœì„œë¥¼ ê³ ë ¤í•˜ì—¬** ë‚˜ì—´í•˜ëŠ” ë°©ë²•ì˜ ìˆ˜
- **ì¡°í•©**: ì›ì†Œë“¤ì„ **ìˆœì„œ ì—†ì´** ì„ íƒí•˜ëŠ” ë°©ë²•ì˜ ìˆ˜

ì¼ìƒì ì¸ ì˜ˆë¥¼ ë“¤ì–´ë³´ì. 5ëª…ì˜ í•™ìƒ ì¤‘ì—ì„œ 3ëª…ì„ ë½‘ì•„ ì¤„ì„ ì„¸ìš°ëŠ” ê²ƒì€ **ìˆœì—´**ì´ë‹¤ (ëˆ„ê°€ 1ë²ˆì§¸, 2ë²ˆì§¸, 3ë²ˆì§¸ì¸ì§€ê°€ ì¤‘ìš”í•˜ë‹¤). ë°˜ë©´ 5ëª… ì¤‘ì—ì„œ 3ëª…ì„ ë½‘ì•„ íŒ€ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì€ **ì¡°í•©**ì´ë‹¤ (ëˆ„ê°€ ë¨¼ì € ë½‘í˜”ëŠ”ì§€ëŠ” ìƒê´€ì—†ë‹¤).

ì´ ì°¨ì´ë¥¼ ìˆ˜í•™ì ìœ¼ë¡œ ì •í™•í•˜ê²Œ ì´í•´í•˜ê³ , Lean 4ì—ì„œ `Nat.factorial`, `Nat.choose`, `Fintype.card`, `Fin` ë“±ì„ í™œìš©í•˜ì—¬ í˜•ì‹ì ìœ¼ë¡œ ì¦ëª…í•˜ëŠ” ë°©ë²•ì„ ë°°ìš´ë‹¤.

---

## 9D.1 ì‚¬ì „ ì¤€ë¹„: Lean 4ì—ì„œ íŒ©í† ë¦¬ì–¼ê³¼ ê¸°ë³¸ ë„êµ¬

### 9D.1.1 **íŒ©í† ë¦¬ì–¼**(Factorial)ì´ë€?

**íŒ©í† ë¦¬ì–¼**(factorial)ì€ 1ë¶€í„° nê¹Œì§€ì˜ ëª¨ë“  ìì—°ìˆ˜ë¥¼ ê³±í•œ ê°’ì´ë‹¤. ê¸°í˜¸ë¡œ `n!`ì´ë¼ ì“´ë‹¤.

$$
n! = n \times (n-1) \times (n-2) \times \cdots \times 2 \times 1
$$

íŠ¹ë³„íˆ `0! = 1`ë¡œ ì •ì˜í•œë‹¤. ì´ê²ƒì€ "ì•„ë¬´ê²ƒë„ ì„ íƒí•˜ì§€ ì•ŠëŠ” ë°©ë²•ì€ ë”± 1ê°€ì§€"ë¼ëŠ” ëœ»ì´ë‹¤.

| n | n! |
|---|-----|
| 0 | 1 |
| 1 | 1 |
| 2 | 2 |
| 3 | 6 |
| 4 | 24 |
| 5 | 120 |

### 9D.1.2 Lean 4ì—ì„œì˜ íŒ©í† ë¦¬ì–¼

Lean 4ì˜ Mathlibì—ì„œ íŒ©í† ë¦¬ì–¼ì€ `Nat.factorial`ë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤. `n!`ì´ë¼ëŠ” í‘œê¸°ë²•ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```lean
import Mathlib

-- ê¸°ë³¸ ê³„ì‚°
#eval Nat.factorial 0   -- 1
#eval Nat.factorial 1   -- 1
#eval Nat.factorial 5   -- 120
#eval Nat.factorial 10  -- 3628800

-- n!ì€ Nat.factorial nì˜ í‘œê¸°ë²•ì´ë‹¤
#eval (5 : â„•).factorial  -- 120
```

### 9D.1.3 íŒ©í† ë¦¬ì–¼ì˜ **ì¬ê·€ì  ì •ì˜**(Recursive Definition)

íŒ©í† ë¦¬ì–¼ì€ ë‹¤ìŒê³¼ ê°™ì´ **ì¬ê·€ì **(recursive)ìœ¼ë¡œ ì •ì˜ëœë‹¤:

- `0! = 1` (ê¸°ì € ì¡°ê±´)
- `(n+1)! = (n+1) Ã— n!` (ì¬ê·€ ë‹¨ê³„)

ì´ê²ƒì„ Lean 4ì—ì„œ ì§ì ‘ ì •ì˜í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤:

```lean
-- Leanì˜ Mathlib ì •ì˜ë¥¼ ë”°ë¼í•œ ê²ƒ (ì‹¤ì œë¡œëŠ” Nat.factorial ì‚¬ìš©)
def myFactorial : â„• â†’ â„•
  | 0     => 1
  | n + 1 => (n + 1) * myFactorial n
```

### 9D.1.4 íŒ©í† ë¦¬ì–¼ì˜ ê¸°ë³¸ ì„±ì§ˆ

```lean
import Mathlib

-- (1) 0! = 1
example : Nat.factorial 0 = 1 := by simp [Nat.factorial]

-- (2) (n+1)! = (n+1) * n!
example (n : â„•) : Nat.factorial (n + 1) = (n + 1) * Nat.factorial n := by
  simp [Nat.factorial]

-- (3) n! > 0 (íŒ©í† ë¦¬ì–¼ì€ í•­ìƒ ì–‘ìˆ˜)
example (n : â„•) : 0 < Nat.factorial n := Nat.factorial_pos n

-- (4) êµ¬ì²´ì ì¸ ê³„ì‚°
example : Nat.factorial 5 = 120 := by native_decide
example : Nat.factorial 3 = 6 := by native_decide
```

---

## 9D.2 **ìˆœì—´**(Permutation): ìˆœì„œê°€ ìˆëŠ” ë°°ì—´

### 9D.2.1 ìˆœì—´ì´ë€ ë¬´ì—‡ì¸ê°€?

ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œë“¤ì˜ ì§‘í•©ì—ì„œ, ì›ì†Œë“¤ì˜ **ìˆœì„œì ì¸ ë°°ì—´**(ordered arrangement)ì„ **ìˆœì—´**(permutation)ì´ë¼ í•œë‹¤.

> **ì •ì˜**: ì§‘í•© Sì˜ ì›ì†Œë“¤ì„ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ë°©ë²•ì„ Sì˜ **ìˆœì—´**ì´ë¼ í•œë‹¤. íŠ¹íˆ, nê°œì˜ ì›ì†Œ ì¤‘ì—ì„œ rê°œë¥¼ ë½‘ì•„ ìˆœì„œëŒ€ë¡œ ë‚˜ì—´í•˜ëŠ” ê²ƒì„ **r-ìˆœì—´**(r-permutation)ì´ë¼ í•œë‹¤.

### 9D.2.2 êµì¬ ì˜ˆì œ 1: ì‚¬ì§„ ì°ê¸°

> **ë¬¸ì œ**: ë‹¤ì„¯ ëª…ì˜ í•™ìƒë“¤ ì¤‘ì—ì„œ ì‚¬ì§„ì„ ì°ê¸° ìœ„í•´ ì„¸ ëª…ì„ ê³¨ë¼ë‚´ ì¤„ ì„¸ìš°ëŠ” ë°©ë²•ì˜ ìˆ˜ëŠ” ì–¼ë§ˆì¸ê°€? ë˜í•œ, ë‹¤ì„¯ ëª…ì„ ëª¨ë‘ ì¤„ ì„¸ìš°ëŠ” ë°©ë²•ì˜ ìˆ˜ëŠ”?

**í’€ì´**:

ì„¸ ëª…ì„ ë½‘ì•„ ì¤„ ì„¸ìš°ëŠ” ê²½ìš°: í•™ìƒì„ ì„ íƒí•˜ëŠ” **ìˆœì„œê°€ ì˜ë¯¸ ìˆë‹¤**. 

- ì²« ë²ˆì§¸ í•™ìƒ: 5ê°€ì§€ ì„ íƒ
- ë‘ ë²ˆì§¸ í•™ìƒ: 4ê°€ì§€ ì„ íƒ (ì²« ë²ˆì§¸ì™€ ë‹¤ë¥¸ ì‚¬ëŒ)
- ì„¸ ë²ˆì§¸ í•™ìƒ: 3ê°€ì§€ ì„ íƒ

**ê³±ì…ˆ ë²•ì¹™**(product rule)ì— ì˜í•´: `5 Ã— 4 Ã— 3 = 60`ê°€ì§€

ë‹¤ì„¯ ëª…ì„ ëª¨ë‘ ì¤„ ì„¸ìš°ëŠ” ê²½ìš°: `5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 5! = 120`ê°€ì§€

```lean
-- 5ëª…ì—ì„œ 3ëª…ì„ ë½‘ì•„ ì¤„ ì„¸ìš°ê¸°: P(5,3) = 60
example : 5 * 4 * 3 = 60 := by norm_num

-- 5ëª… ì „ë¶€ ì¤„ ì„¸ìš°ê¸°: 5! = 120
example : Nat.factorial 5 = 120 := by native_decide
```

### 9D.2.3 **r-ìˆœì—´ì˜ ìˆ˜**: P(n, r)

nê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œë¡œ ì´ë£¨ì–´ì§„ ì§‘í•©ì—ì„œ rê°œë¥¼ ì„ íƒí•˜ì—¬ ìˆœì„œëŒ€ë¡œ ë‚˜ì—´í•˜ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ `P(n, r)`ë¡œ í‘œê¸°í•œë‹¤.

> **ì •ë¦¬ 1** (Rosen ì •ë¦¬ 1): nê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œë¡œ ì´ë£¨ì–´ì§„ ì§‘í•©ì—ì„œì˜ r-ìˆœì—´ì˜ ê°œìˆ˜ P(n, r)ì€  
> $$P(n, r) = n(n-1)(n-2)\cdots(n-r+1)$$  
> ì´ë‹¤.

ì´ ê³µì‹ì˜ ì˜ë¯¸ë¥¼ í•˜ë‚˜í•˜ë‚˜ ë”°ì ¸ë³´ì:

- ì²« ë²ˆì§¸ ìœ„ì¹˜: nê°€ì§€ ì„ íƒ
- ë‘ ë²ˆì§¸ ìœ„ì¹˜: n-1ê°€ì§€ ì„ íƒ (í•˜ë‚˜ê°€ ì´ë¯¸ ì‚¬ìš©ë¨)
- ì„¸ ë²ˆì§¸ ìœ„ì¹˜: n-2ê°€ì§€ ì„ íƒ
- ...
- rë²ˆì§¸ ìœ„ì¹˜: n-r+1ê°€ì§€ ì„ íƒ

**ê³±ì…ˆ ë²•ì¹™**ì„ ì ìš©í•˜ë©´ ìœ„ì˜ ê³µì‹ì´ ë‚˜ì˜¨ë‹¤.

### 9D.2.4 **ë”°ë¦„ì •ë¦¬**(Corollary) 1: íŒ©í† ë¦¬ì–¼ í‘œí˜„

> **ë”°ë¦„ì •ë¦¬ 1**: nê³¼ rì´ 0 â‰¤ r â‰¤ nì¸ ì •ìˆ˜ì´ë©´  
> $$P(n, r) = \frac{n!}{(n-r)!}$$  
> ì´ë‹¤.

**ì™œ ì´ë ‡ê²Œ ë˜ëŠ”ê°€?** ì§ì ‘ í™•ì¸í•´ë³´ì:

$$P(n, r) = n(n-1)\cdots(n-r+1) = \frac{n!}{(n-r)!}$$

ì˜ˆë¥¼ ë“¤ì–´, P(5, 3)ì„ ê³„ì‚°í•˜ë©´:

$$P(5, 3) = \frac{5!}{(5-3)!} = \frac{5!}{2!} = \frac{120}{2} = 60$$

```lean
-- P(n, r) = n! / (n-r)! ë¥¼ Leanì—ì„œ í™•ì¸
-- Leanì—ì„œëŠ” Nat.descFactorialì„ ì‚¬ìš©í•œë‹¤
-- n.descFactorial r = n * (n-1) * ... * (n-r+1)

#eval Nat.descFactorial 5 3  -- 60  (= 5 * 4 * 3)
#eval Nat.descFactorial 8 3  -- 336 (= 8 * 7 * 6)

-- íŒ©í† ë¦¬ì–¼ê³¼ì˜ ê´€ê³„
example : Nat.descFactorial 5 3 = Nat.factorial 5 / Nat.factorial 2 := by native_decide
```

### 9D.2.5 Lean 4ì—ì„œ ìˆœì—´ì˜ ìˆ˜ë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•

Lean 4ì˜ Mathlibì—ëŠ” `Nat.descFactorial`ì´ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤. ì´ê²ƒì€ **í•˜ê°• íŒ©í† ë¦¬ì–¼**(descending factorial)ë¡œ, ì •í™•íˆ P(n, r)ì— í•´ë‹¹í•œë‹¤.

```lean
-- Nat.descFactorial n r = n * (n-1) * ... * (n-r+1)
-- ì´ê²ƒì´ ë°”ë¡œ P(n, r)ì´ë‹¤!

-- ê¸°ë³¸ ê³„ì‚°
#eval Nat.descFactorial 5 0  -- 1  (ì•„ë¬´ê²ƒë„ ì•ˆ ë½‘ìŒ)
#eval Nat.descFactorial 5 1  -- 5  (í•˜ë‚˜ë§Œ ë½‘ìŒ)
#eval Nat.descFactorial 5 5  -- 120 (= 5!)

-- ì¬ê·€ì  ì„±ì§ˆ
-- descFactorial 0 0 = 1
-- descFactorial (n+1) (r+1) = (n+1) * descFactorial n r
```

### 9D.2.6 êµì¬ ì˜ˆì œ 4: ê²½í’ˆ ì¶”ì²¨

> **ë¬¸ì œ**: 100ëª…ì˜ ì‚¬ëŒì´ ì°¸ê°€í•œ ê²½í’ˆì—ì„œ 1ë“±, 2ë“±, 3ë“±ì„ ì„ ë°œí•˜ëŠ” ë°©ë²•ì€ ëª¨ë‘ ëª‡ ê°€ì§€ì¸ê°€?

**í’€ì´**: ì–´ë–¤ ì‚¬ëŒì´ ì–´ë–¤ ìƒì„ ë°›ëŠëƒê°€ ì¤‘ìš”í•˜ë¯€ë¡œ, ì´ê²ƒì€ 100ê°œì˜ ì›ì†Œì—ì„œ 3ê°œë¥¼ ë½‘ëŠ” 3-ìˆœì—´ì´ë‹¤.

$$P(100, 3) = 100 \times 99 \times 98 = 970{,}200$$

```lean
-- P(100, 3) = 100 * 99 * 98 = 970200
example : Nat.descFactorial 100 3 = 970200 := by native_decide

-- ë˜ëŠ” ì§ì ‘ ê³„ì‚°
example : 100 * 99 * 98 = 970200 := by norm_num
```

### 9D.2.7 êµì¬ ì˜ˆì œ 5: ë©”ë‹¬ ìˆ˜ì—¬

> **ë¬¸ì œ**: ê²½ì£¼ì— ì°¸ê°€í•˜ëŠ” 8ëª…ì˜ ì„ ìˆ˜ê°€ ìˆë‹¤. ìš°ìŠ¹ìëŠ” ê¸ˆë©”ë‹¬, 2ë“±ì€ ì€ë©”ë‹¬, 3ë“±ì€ ë™ë©”ë‹¬ì„ ë°›ëŠ”ë‹¤. ë™ë¥ ì€ ì—†ë‹¤ê³  í•  ë•Œ, ë©”ë‹¬ì´ ìˆ˜ì—¬ë  ìˆ˜ ìˆëŠ” ì„œë¡œ ë‹¤ë¥¸ ëª¨ë“  ê°€ëŠ¥í•œ ë°©ë²•ì˜ ìˆ˜ëŠ” ì–¼ë§ˆì¸ê°€?

**í’€ì´**: P(8, 3) = 8 Ã— 7 Ã— 6 = 336

```lean
example : Nat.descFactorial 8 3 = 336 := by native_decide
```

### 9D.2.8 êµì¬ ì˜ˆì œ 6: ì™¸íŒì›ì˜ ë„ì‹œ ë°©ë¬¸

> **ë¬¸ì œ**: ì™¸íŒì›ì´ 8ê°œì˜ ë„ì‹œë¥¼ ë°©ë¬¸í•˜ì—¬ì•¼ í•œë‹¤. íŠ¹ì •í•œ ë„ì‹œì—ì„œ ì¶œë°œí•˜ë˜ ë‚˜ë¨¸ì§€ 7ê°œì˜ ë„ì‹œëŠ” ì›í•˜ëŠ” ìˆœì„œëŒ€ë¡œ ë°©ë¬¸í•  ìˆ˜ ìˆë‹¤. ì´ ì™¸íŒì›ì´ 8ë„ì‹œë¥¼ ë°©ë¬¸í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ” ëª¨ë‘ ëª‡ ê°€ì§€ì¸ê°€?

**í’€ì´**: ì²« ë²ˆì§¸ ë„ì‹œëŠ” ê³ ì •ì´ë¯€ë¡œ, ë‚˜ë¨¸ì§€ 7ê°œ ë„ì‹œì˜ ìˆœì—´ì„ êµ¬í•˜ë©´ ëœë‹¤.

$$7! = 5040$$

```lean
example : Nat.factorial 7 = 5040 := by native_decide
```

### 9D.2.9 êµì¬ ì˜ˆì œ 7: ë¬¸ìì—´ ABC í¬í•¨

> **ë¬¸ì œ**: ABCDEFGHì˜ ìˆœì—´ ì¤‘ì—ì„œ ABC ë¬¸ìì—´ì„ í¬í•¨í•˜ëŠ” ê²ƒì€ ëª¨ë‘ ëª‡ ê°œì¸ê°€?

**í’€ì´**: ABC ë¬¸ìì—´ì„ í•˜ë‚˜ì˜ ë¸”ë¡ìœ¼ë¡œ ë‚˜íƒ€ë‚´ì•¼ í•˜ë¯€ë¡œ, {ABC}, D, E, F, G, Hì˜ 6ê°œ ê°ì²´ì˜ ìˆœì—´ì„ êµ¬í•˜ë©´ ëœë‹¤. 6ê°œ ì›ì†Œì˜ ìˆœì—´ì€ 6! = 720ê°€ì§€ì´ë‹¤.

```lean
example : Nat.factorial 6 = 720 := by native_decide
```

---

## 9D.3 Lean 4ì—ì„œ ìˆœì—´ì„ í˜•ì‹í™”í•˜ê¸°

### 9D.3.1 `Fin n`ê³¼ í•¨ìˆ˜ë¡œ í‘œí˜„í•˜ëŠ” ìˆœì—´

Lean 4ì—ì„œ ìˆœì—´ì„ ê°€ì¥ ìì—°ìŠ¤ëŸ½ê²Œ í‘œí˜„í•˜ëŠ” ë°©ë²•ì€ `Equiv.Perm (Fin n)` íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì´ê²ƒì€ `Fin n` ìœ„ì˜ **ì „ë‹¨ì‚¬ í•¨ìˆ˜**(bijection), ì¦‰ `{0, 1, ..., n-1}`ì„ ìê¸° ìì‹ ìœ¼ë¡œ ë³´ë‚´ëŠ” ì¼ëŒ€ì¼ ëŒ€ì‘ì´ë‹¤.

```lean
import Mathlib

-- Fin 3 = {0, 1, 2}
-- Equiv.Perm (Fin 3)ì€ {0,1,2}ì˜ ëª¨ë“  ìˆœì—´ì„ ë‚˜íƒ€ë‚´ëŠ” íƒ€ì…ì´ë‹¤

-- ìˆœì—´ì˜ ê°œìˆ˜ëŠ” n!
example : Fintype.card (Equiv.Perm (Fin 3)) = Nat.factorial 3 := by
  simp [Fintype.card_perm]

-- ì¦‰, 3ê°œ ì›ì†Œì˜ ìˆœì—´ì€ 6ê°€ì§€
example : Fintype.card (Equiv.Perm (Fin 3)) = 6 := by
  simp [Fintype.card_perm]
  native_decide
```

### 9D.3.2 **í•µì‹¬ ì •ë¦¬**: nê°œ ì›ì†Œì˜ ì „ì²´ ìˆœì—´ì˜ ìˆ˜ëŠ” n!

ì´ê²ƒì€ Lean 4ì—ì„œ `Fintype.card_perm`ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì¦ëª…ë˜ì–´ ìˆë‹¤:

```lean
-- Fintype.card_perm : Fintype.card (Equiv.Perm Î±) = Nat.factorial (Fintype.card Î±)

-- ì˜ˆì‹œ: 5ê°œ ì›ì†Œì˜ ì „ì²´ ìˆœì—´ì˜ ìˆ˜
example : Fintype.card (Equiv.Perm (Fin 5)) = 120 := by
  simp [Fintype.card_perm]
  native_decide
```

### 9D.3.3 r-ìˆœì—´ì„ Lean 4ì—ì„œ í‘œí˜„í•˜ê¸°

r-ìˆœì—´ì€ "nê°œì—ì„œ rê°œë¥¼ ë½‘ì•„ ìˆœì„œëŒ€ë¡œ ë‚˜ì—´"í•˜ëŠ” ê²ƒì´ë‹¤. ì´ê²ƒì„ Lean 4ì—ì„œëŠ” **ë‹¨ì‚¬ í•¨ìˆ˜**(injective function) `Fin r â†’ Fin n`ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. ì¦‰, rê°œì˜ ìœ„ì¹˜ ê°ê°ì— nê°œì˜ ì›ì†Œ ì¤‘ í•˜ë‚˜ë¥¼ ë°°ì •í•˜ë˜ ì¤‘ë³µ ì—†ì´ ë°°ì •í•˜ëŠ” ê²ƒì´ë‹¤.

```lean
-- Fin rì—ì„œ Fin nìœ¼ë¡œì˜ ë‹¨ì‚¬ í•¨ìˆ˜ì˜ ìˆ˜ = P(n, r)

-- êµ¬ì²´ì ì¸ í™•ì¸: P(5,3) = 60
-- Fin 3 â†’ Fin 5 ì¸ ë‹¨ì‚¬ í•¨ìˆ˜ì˜ ê°œìˆ˜
-- (ì´ê²ƒì€ ì§ì ‘ ì„¸ê¸°ëŠ” ë³µì¡í•˜ë¯€ë¡œ, ê³µì‹ì„ í™•ì¸í•œë‹¤)
example : Nat.descFactorial 5 3 = 60 := by native_decide
```

---

## 9D.4 **ì¡°í•©**(Combination): ìˆœì„œ ì—†ëŠ” ì„ íƒ

### 9D.4.1 ì¡°í•©ì´ë€ ë¬´ì—‡ì¸ê°€?

**ìˆœì—´**ì´ ìˆœì„œë¥¼ ê³ ë ¤í•œ ë°°ì—´ì´ë¼ë©´, **ì¡°í•©**ì€ ìˆœì„œë¥¼ ë¬´ì‹œí•œ **ì„ íƒ**ì´ë‹¤.

> **ì •ì˜**: ì–´ë–¤ ì§‘í•©ì—ì„œ rê°œì˜ ì›ì†Œë¥¼ **ìˆœì„œ ì—†ì´** ì„ íƒí•˜ëŠ” ê²ƒì„ ê·¸ ì§‘í•©ì˜ ì›ì†Œë“¤ì˜ **r-ì¡°í•©**(r-combination)ì´ë¼ ë¶€ë¥¸ë‹¤. ê²°êµ­ r-ì¡°í•©ì€ rê°œ ì›ì†Œë¥¼ ê°€ì§„ ì§‘í•©ì˜ í•œ **ë¶€ë¶„ì§‘í•©**(subset)ì— í•´ë‹¹ëœë‹¤.

í•µì‹¬ì ì¸ ì°¨ì´ë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ì:

| ìƒí™© | ìˆœì—´ì¸ê°€ ì¡°í•©ì¸ê°€? | ì´ìœ  |
|------|------------|------|
| 5ëª… ì¤‘ 3ëª…ì„ ë½‘ì•„ **ì¤„ ì„¸ìš°ê¸°** | ìˆœì—´ | ìˆœì„œê°€ ì¤‘ìš” |
| 5ëª… ì¤‘ 3ëª…ìœ¼ë¡œ **íŒ€ êµ¬ì„±** | ì¡°í•© | ìˆœì„œê°€ ë¬´ê´€ |
| ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬ ì„¤ì • | ìˆœì—´ | ìˆœì„œê°€ ì¤‘ìš” (1234 â‰  4321) |
| ì¹´ë“œ 5ì¥ ë½‘ê¸° | ì¡°í•© | ìˆœì„œê°€ ë¬´ê´€ |

### 9D.4.2 êµì¬ ì˜ˆì œ 8: í•™ìƒ ì„ íƒ

> **ë¬¸ì œ**: ë„¤ ëª…ì˜ í•™ìƒë“¤ë¡œë¶€í„° ì„¸ ëª…ì˜ í•™ìƒë“¤ì„ ì„ íƒí•´ë‚´ëŠ” ë°©ë²•ì˜ ìˆ˜ëŠ” ëª‡ ê°€ì§€ì¸ê°€?

**í’€ì´**: ì´ ë¬¸ì œëŠ” ë„¤ ëª…ì˜ í•™ìƒë“¤ì˜ ì§‘í•©ì—ì„œë¶€í„° ì„¸ ëª…ì˜ í•™ìƒë“¤ì„ í¬í•¨ì‹œí‚¤ëŠ” ë¶€ë¶„ì§‘í•©ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œì™€ ë™ì¼í•˜ë‹¤. ëª¨ë‘ 4ê°œì˜ ë¶€ë¶„ì§‘í•©ì´ ê°€ëŠ¥í•˜ë‹¤ (ì „ì²´ì—ì„œ í•œ ëª…ì˜ í•™ìƒì„ ì œì™¸ì‹œí‚¤ëŠ” ë°©ë²•ê³¼ ë™ì¼).

### 9D.4.3 êµì¬ ì˜ˆì œ 9

> S = {1, 2, 3, 4}ë¼ í•˜ë©´, {1, 3, 4}ëŠ” Sì˜ 3-ì¡°í•©ì´ë‹¤. (ì§‘í•© ë‚´ì—ì„œ ì›ì†Œë“¤ ê°„ì˜ ìˆœì„œëŠ” ì˜ë¯¸ê°€ ì—†ìœ¼ë¯€ë¡œ {4, 1, 3}ì€ {1, 3, 4}ì™€ ì™„ì „íˆ ë™ì¼í•œ 3-ì¡°í•©ì„ì„ ê¸°ì–µí•˜ì.)

### 9D.4.4 ì¡°í•©ì˜ ìˆ˜: C(n, r)

nê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œë¡œ ì´ë£¨ì–´ì§„ ì§‘í•©ì—ì„œì˜ r-ì¡°í•©ì˜ ê°œìˆ˜ëŠ” `C(n, r)`ë¡œ í‘œê¸°í•œë‹¤. ë˜í•œ $\binom{n}{r}$ë¡œ í‘œê¸°í•˜ì—¬ **ì´í•­ ê³„ìˆ˜**(binomial coefficient)ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.

> **ì •ë¦¬ 2** (Rosen ì •ë¦¬ 2): 0 â‰¤ r â‰¤ nì¼ ë•Œ, nê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ì›ì†Œë¡œ ì´ë£¨ì–´ì§„ ì§‘í•©ì—ì„œ r-ì¡°í•©ì˜ ê°œìˆ˜ C(n, r)ì€  
> $$C(n, r) = \frac{n!}{r!(n-r)!}$$  
> ì´ë‹¤.

### 9D.4.5 ì™œ ì´ ê³µì‹ì´ ì„±ë¦½í•˜ëŠ”ê°€?

ì´ ê³µì‹ì„ ì´í•´í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ **ìˆœì—´ê³¼ ì¡°í•©ì˜ ê´€ê³„**ë¥¼ ìƒê°í•˜ëŠ” ê²ƒì´ë‹¤.

r-ìˆœì—´ P(n, r)ì€ **ë‘ ë‹¨ê³„**ë¡œ ì´ë£¨ì–´ì§„ë‹¤:
1. ë¨¼ì € nê°œì—ì„œ rê°œë¥¼ **ì„ íƒ**í•œë‹¤ â†’ C(n, r)ê°€ì§€
2. ì„ íƒí•œ rê°œë¥¼ **ìˆœì„œëŒ€ë¡œ ë°°ì—´**í•œë‹¤ â†’ r!ê°€ì§€

ë”°ë¼ì„œ **ê³±ì…ˆ ë²•ì¹™**ì— ì˜í•´:

$$P(n, r) = C(n, r) \times r!$$

ì´ê²ƒì„ C(n, r)ì— ëŒ€í•´ í’€ë©´:

$$C(n, r) = \frac{P(n, r)}{r!} = \frac{n!/(n-r)!}{r!} = \frac{n!}{r!(n-r)!}$$

ì´ê²ƒì´ ë°”ë¡œ ì •ë¦¬ 2ì˜ ê³µì‹ì´ë‹¤! ë§¤ìš° ì•„ë¦„ë‹¤ìš´ ê´€ê³„ì´ë‹¤.

```
ìˆœì—´ = ì¡°í•© Ã— ë°°ì—´
P(n,r) = C(n,r) Ã— P(r,r)
P(n,r) = C(n,r) Ã— r!
```

### 9D.4.6 Lean 4ì—ì„œì˜ ì¡°í•©: `Nat.choose`

Lean 4ì—ì„œ C(n, r)ì€ `Nat.choose n r`ë¡œ í‘œí˜„í•œë‹¤. ì´ê²ƒì€ $\binom{n}{r}$ì— í•´ë‹¹í•œë‹¤.

```lean
import Mathlib

-- ê¸°ë³¸ ê³„ì‚°
#eval Nat.choose 4 2   -- 6
#eval Nat.choose 5 3   -- 10
#eval Nat.choose 10 5  -- 252
#eval Nat.choose 52 5  -- 2598960

-- ê²½ê³„ ì‚¬ë¡€
#eval Nat.choose 5 0   -- 1  (ì•„ë¬´ê²ƒë„ ì•ˆ ë½‘ìŒ)
#eval Nat.choose 5 5   -- 1  (ì „ë¶€ ë½‘ìŒ)
#eval Nat.choose 3 5   -- 0  (ë½‘ì„ ìˆ˜ ìˆëŠ” ê²ƒë³´ë‹¤ ë§ì´ ë½‘ìœ¼ë ¤ í•¨)
```

---

## 9D.5 ì¡°í•©ì˜ í•µì‹¬ ì„±ì§ˆê³¼ Lean 4 ì¦ëª…

### 9D.5.1 C(n, 0) = 1 ê³¼ C(n, n) = 1

ì•„ë¬´ê²ƒë„ ì„ íƒí•˜ì§€ ì•ŠëŠ” ë°©ë²•ì€ ë”± 1ê°€ì§€ (ê³µì§‘í•©), ì „ë¶€ ì„ íƒí•˜ëŠ” ë°©ë²•ë„ ë”± 1ê°€ì§€ì´ë‹¤.

```lean
-- C(n, 0) = 1
example (n : â„•) : Nat.choose n 0 = 1 := Nat.choose_zero_right n

-- C(n, n) = 1
example (n : â„•) : Nat.choose n n = 1 := Nat.choose_self n
```

#### ğŸ‹ï¸ ì—°ìŠµ 9D-1: ê²½ê³„ê°’ í™•ì¸ (ê´„í˜¸ ì±„ìš°ê¸°)

```lean
-- Nat.chooseì˜ ê²½ê³„ê°’ì„ í™•ì¸í•´ë³´ì
example : Nat.choose 7 0 = âŸ¨___âŸ© := by native_decide
example : Nat.choose 7 7 = âŸ¨___âŸ© := by native_decide
example : Nat.choose 7 1 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
example : Nat.choose 7 0 = 1 := by native_decide
example : Nat.choose 7 7 = 1 := by native_decide
example : Nat.choose 7 1 = 7 := by native_decide
```

**í•´ì„¤**: C(7,0) = 1 (ê³µì§‘í•©), C(7,7) = 1 (ì „ì²´ì§‘í•©), C(7,1) = 7 (ì›ì†Œ í•˜ë‚˜ì”© ì„ íƒ)ì´ë‹¤.

</details>

### 9D.5.2 **ë”°ë¦„ì •ë¦¬ 2**: C(n, r) = C(n, n-r)

> **ë”°ë¦„ì •ë¦¬ 2**: nê³¼ rì´ ì–‘ì˜ ì •ìˆ˜ì´ê³  r â‰¤ nì´ë©´, C(n, r) = C(n, n-r)ì´ë‹¤.

ì´ê²ƒì˜ ì§ê´€ì  ì˜ë¯¸: nê°œì—ì„œ rê°œë¥¼ **ì„ íƒí•˜ëŠ”** ê²ƒì€ nê°œì—ì„œ n-rê°œë¥¼ **ì œì™¸í•˜ëŠ”** ê²ƒê³¼ ê°™ë‹¤!

ì˜ˆë¥¼ ë“¤ì–´, 52ì¥ì˜ ì¹´ë“œì—ì„œ 5ì¥ì„ ë½‘ëŠ” ë°©ë²•ì˜ ìˆ˜ C(52, 5)ëŠ” 52ì¥ì—ì„œ 47ì¥ì„ ë½‘ëŠ” ë°©ë²•ì˜ ìˆ˜ C(52, 47)ê³¼ ê°™ë‹¤. 5ì¥ì„ ë½‘ëŠ” ê²ƒ = 47ì¥ì„ ë‚¨ê¸°ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.

**ì¦ëª…** (ëŒ€ìˆ˜ì ):

$$C(n, r) = \frac{n!}{r!(n-r)!}$$

$$C(n, n-r) = \frac{n!}{(n-r)!(n-(n-r))!} = \frac{n!}{(n-r)!r!}$$

ë”°ë¼ì„œ C(n, r) = C(n, n-r)ì´ë‹¤.

```lean
-- ë”°ë¦„ì •ë¦¬ 2: C(n, r) = C(n, n-r)
-- Leanì—ì„œëŠ” Nat.choose_symm_diffë¼ëŠ” ì´ë¦„ì´ë‹¤
example (n : â„•) (h : 5 â‰¤ n) : Nat.choose n 5 = Nat.choose n (n - 5) := by
  exact Nat.choose_symm h

-- êµ¬ì²´ì ì¸ ì˜ˆ
example : Nat.choose 52 5 = Nat.choose 52 47 := by native_decide
example : Nat.choose 10 3 = Nat.choose 10 7 := by native_decide
```

#### ğŸ‹ï¸ ì—°ìŠµ 9D-2: ëŒ€ì¹­ì„± í™•ì¸ (ê´„í˜¸ ì±„ìš°ê¸°)

```lean
-- C(n, r) = C(n, n-r)ë¥¼ êµ¬ì²´ì ì¸ ê°’ìœ¼ë¡œ í™•ì¸í•´ë³´ì
example : Nat.choose 8 3 = Nat.choose 8 âŸ¨___âŸ© := by native_decide
example : Nat.choose 12 4 = Nat.choose 12 âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
example : Nat.choose 8 3 = Nat.choose 8 5 := by native_decide
example : Nat.choose 12 4 = Nat.choose 12 8 := by native_decide
```

**í•´ì„¤**: C(8, 3) = C(8, 8-3) = C(8, 5)ì´ê³ , C(12, 4) = C(12, 12-4) = C(12, 8)ì´ë‹¤.

</details>

### 9D.5.3 êµì¬ ì˜ˆì œ 10: ë¶€ë¶„ì§‘í•©ì˜ ìˆ˜

> **ë¬¸ì œ**: ì§‘í•© {a, b, c, d}ì˜ 2-ì¡°í•©ì€ 6ê°œì˜ ë¶€ë¶„ì§‘í•© {a, b}, {a, c}, {a, d}, {b, c}, {b, d}, {c, d}ì´ë¯€ë¡œ C(4, 2) = 6ì´ë‹¤.

```lean
example : Nat.choose 4 2 = 6 := by native_decide
```

### 9D.5.4 êµì¬ ì˜ˆì œ 11: í¬ì»¤ ì¹´ë“œ

> **ë¬¸ì œ**: 52ì¥ì˜ í¬ì»¤ ì¹´ë“œë¡œë¶€í„° 5ì¥ì˜ ì¹´ë“œë¥¼ ê°–ëŠ” ë°©ë²•ì˜ ìˆ˜ëŠ” ëª‡ ê°€ì§€ì¸ê°€? ë˜í•œ, 52ì¥ìœ¼ë¡œë¶€í„° 47ì¥ì˜ ì¹´ë“œë¥¼ ì„ íƒí•˜ëŠ” ë°©ë²•ì˜ ìˆ˜ëŠ” ëª‡ ê°€ì§€ì¸ê°€?

**í’€ì´**: ì¹´ë“œê°€ ì£¼ì–´ì§€ëŠ” ìˆœì„œëŠ” ë¬¸ì œê°€ ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì¡°í•© ì •ë¦¬ì— ì˜í•´:

$$C(52, 5) = \frac{52!}{5! \cdot 47!} = \frac{52 \cdot 51 \cdot 50 \cdot 49 \cdot 48}{5 \cdot 4 \cdot 3 \cdot 2 \cdot 1} = 2{,}598{,}960$$

ê·¸ë¦¬ê³  C(52, 47) = C(52, 5) = 2,598,960ì´ë‹¤.

```lean
example : Nat.choose 52 5 = 2598960 := by native_decide
example : Nat.choose 52 47 = 2598960 := by native_decide

-- ì´ ë‘˜ì´ ê°™ë‹¤ëŠ” ê²ƒì€ ë”°ë¦„ì •ë¦¬ 2ì— ì˜í•œë‹¤
example : Nat.choose 52 5 = Nat.choose 52 47 := by native_decide
```

### 9D.5.5 êµì¬ ì˜ˆì œ 12: í…Œë‹ˆìŠ¤ íŒ€ ì„ ë°œ

> **ë¬¸ì œ**: 10ëª…ì˜ ì„ ìˆ˜ë¡œ ëœ í…Œë‹ˆìŠ¤ íŒ€ì—ì„œ ì‹œí•©ì— ì¶œì „í•  5ëª…ì˜ ì„ ìˆ˜ë¥¼ ì„ ë°œí•˜ëŠ” ë°©ë²•ì˜ ìˆ˜ëŠ” ëª¨ë‘ ëª‡ ê°€ì§€ì¸ê°€?

**í’€ì´**: C(10, 5) = 252

```lean
example : Nat.choose 10 5 = 252 := by native_decide
```

### 9D.5.6 êµì¬ ì˜ˆì œ 13: ìš°ì£¼ë¹„í–‰ì‚¬ ì„ ë°œ

> **ë¬¸ì œ**: í™”ì„±ìœ¼ë¡œ í•­í•´í•  ì„ë¬´ë¥¼ ë¤ ìš°ì£¼ë¹„í–‰ì‚¬ë¡œì„œ 30ëª…ì´ í›ˆë ¨ì„ ë°›ì•„ ì™”ë‹¤. ëª¨ë“  ìŠ¹ë¬´ì›ë“¤ì´ ê°™ì€ ì„ë¬´ë¥¼ ë ê³  ìˆë‹¤ê³  ê°€ì •í•  ë•Œ 6ëª…ì˜ ìŠ¹ë¬´ì›ì„ ì„ ë°œí•˜ëŠ” ë°©ë²•ì€ ëª¨ë‘ ëª‡ ê°€ì§€ì¸ê°€?

**í’€ì´**: C(30, 6) = 593,775

```lean
example : Nat.choose 30 6 = 593775 := by native_decide
```

### 9D.5.7 êµì¬ ì˜ˆì œ 14: ë¹„íŠ¸ ë¬¸ìì—´

> **ë¬¸ì œ**: ê¸¸ì´ nì¸ ë¹„íŠ¸ ë¬¸ìì—´ ì¤‘ì—ì„œ 1ì„ ì •í™•íˆ rê°œ í¬í•¨í•˜ê³  ìˆëŠ” ê²ƒì€ ëª¨ë‘ ëª‡ ê°œì¸ê°€?

**í’€ì´**: ê¸¸ì´ nì¸ ë¹„íŠ¸ ë¬¸ìì—´ì—ì„œ rê°œì˜ ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì€ ì§‘í•© {1, 2, 3, ..., n}ì˜ r-ì¡°í•©ì„ ë§Œë“ ë‹¤. ë”°ë¼ì„œ ë‹µì€ C(n, r)ê°œì´ë‹¤.

```lean
-- ê¸¸ì´ 10ì¸ ë¹„íŠ¸ ë¬¸ìì—´ì—ì„œ 1ì´ ì •í™•íˆ 3ê°œì¸ ê²ƒì˜ ìˆ˜
example : Nat.choose 10 3 = 120 := by native_decide

-- ê¸¸ì´ 8ì¸ ë¹„íŠ¸ ë¬¸ìì—´ì—ì„œ 1ì´ ì •í™•íˆ 4ê°œì¸ ê²ƒì˜ ìˆ˜
example : Nat.choose 8 4 = 70 := by native_decide
```

### 9D.5.8 êµì¬ ì˜ˆì œ 15: ìœ„ì›íšŒ êµ¬ì„± (ê³±ì…ˆ ë²•ì¹™ + ì¡°í•©)

> **ë¬¸ì œ**: ì´ì‚°ìˆ˜í•™ ê³¼ëª©ì„ ê°œë°œí•˜ê¸° ìœ„í•œ ìœ„ì›íšŒë¥¼ êµ¬ì„±í•˜ë ¤ê³  í•œë‹¤. ìˆ˜í•™ê³¼ êµìˆ˜ê°€ 9ëª…, ì „ì‚°ê³¼ êµìˆ˜ê°€ 11ëª…ì¼ ë•Œ, ìˆ˜í•™ê³¼ êµìˆ˜ 3ëª…, ì „ì‚°ê³¼ êµìˆ˜ 4ëª…ìœ¼ë¡œ ìœ„ì›íšŒë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì€ ëª¨ë‘ ëª‡ ê°€ì§€ì¸ê°€?

**í’€ì´**: **ê³±ì…ˆ ë²•ì¹™**ì— ì˜í•´ì„œ, ì›ì†Œ 9ê°œì˜ ì§‘í•©ì— ëŒ€í•œ 3-ì¡°í•©ê³¼ ì›ì†Œ 11ê°œì˜ ì§‘í•©ì— ëŒ€í•œ 4-ì¡°í•©ì˜ ìˆ˜ë¥¼ ê³±í•˜ë©´ ëœë‹¤.

$$C(9, 3) \cdot C(11, 4) = 84 \cdot 330 = 27{,}720$$

```lean
example : Nat.choose 9 3 * Nat.choose 11 4 = 27720 := by native_decide
```

---

## 9D.6 ì¡°í•© ì¦ëª…ì˜ í•µì‹¬: ì¡°í•©ì  ì¦ëª…

### 9D.6.1 **ì¡°í•© ì¦ëª…**(Combinatorial Proof)ì´ë€?

**ì •ì˜ 1** (Rosen ì •ì˜ 1): í•­ë“±ì‹ì— ëŒ€í•œ **ì¡°í•© ì¦ëª…**(combinatorial proof)ì´ë€ í•­ë“±ì‹ì—ì„œì˜ ì–‘ë³€ ê°ê°ì´ ë¹„ë¡ ì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì…ˆí•˜ê³ ëŠ” ìˆì§€ë§Œ ê·¸ ê²°ê³¼ê°€ ê°™ìŒì„ ì¦ëª…í•˜ê¸° ìœ„í•´ ê³„ìˆ˜ì  ë°©ë²•ë“¤ì„ ì‚¬ìš©í•˜ëŠ” ì¦ëª…ë²•ì´ë‹¤.

ì‰½ê²Œ ë§í•˜ë©´, **ê°™ì€ ê²ƒì„ ë‘ ê°€ì§€ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì„¸ì–´ì„œ ë‘ ì‹ì´ ê°™ìŒì„ ë³´ì´ëŠ”** ì¦ëª… ë°©ë²•ì´ë‹¤!

ì˜ˆë¥¼ ë“¤ì–´, ë”°ë¦„ì •ë¦¬ 2 `C(n, r) = C(n, n-r)`ì˜ ì¡°í•© ì¦ëª…:

- **ì™¼ìª½** C(n, r): nê°œì—ì„œ rê°œë¥¼ **ì„ íƒí•˜ëŠ”** ë°©ë²•ì˜ ìˆ˜
- **ì˜¤ë¥¸ìª½** C(n, n-r): nê°œì—ì„œ n-rê°œë¥¼ **ì„ íƒí•˜ëŠ”** ë°©ë²•ì˜ ìˆ˜

ê·¸ëŸ°ë° "rê°œë¥¼ ì„ íƒí•˜ëŠ” ê²ƒ"ê³¼ "ë‚˜ë¨¸ì§€ n-rê°œë¥¼ ì„ íƒí•˜ëŠ” ê²ƒ"ì€ **ì •í™•íˆ ê°™ì€ ê²ƒ**ì´ë‹¤! (rê°œë¥¼ ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ n-rê°œê°€ ì„ íƒë˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ê²°ì •ë˜ê¸° ë•Œë¬¸.) ë”°ë¼ì„œ C(n, r) = C(n, n-r)ì´ë‹¤.

### 9D.6.2 Lean 4ì—ì„œ ì¡°í•© ì¦ëª… ë§›ë³´ê¸°

```lean
import Mathlib

-- C(n, r) = C(n, n-r)ì˜ Lean ì¦ëª…
-- Mathlibì—ì„œëŠ” Nat.choose_symmë¡œ ì œê³µëœë‹¤
example (n r : â„•) (h : r â‰¤ n) : Nat.choose n r = Nat.choose n (n - r) := by
  exact Nat.choose_symm h
```

---

## 9D.7 Lean 4ì—ì„œ Finset.cardì™€ chooseì˜ ê´€ê³„

### 9D.7.1 ë¶€ë¶„ì§‘í•©ì˜ ìˆ˜ì™€ choose

Lean 4ì—ì„œ ìœ í•œ ì§‘í•©ì˜ í¬ê¸°ê°€ kì¸ ë¶€ë¶„ì§‘í•©ì˜ ìˆ˜ë¥¼ ì„¸ëŠ” ê²ƒì€ `Nat.choose`ì™€ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ëœë‹¤.

```lean
import Mathlib

-- Finset.card (Finset.powersetCard k s) = Nat.choose (Finset.card s) k
-- ì¦‰, í¬ê¸° kì¸ ë¶€ë¶„ì§‘í•©ì˜ ìˆ˜ = C(|s|, k)

-- êµ¬ì²´ì ì¸ ì˜ˆ: {0,1,2,3}ì˜ í¬ê¸° 2ì¸ ë¶€ë¶„ì§‘í•©ì˜ ìˆ˜
example : (Finset.range 4).powersetCard 2 |>.card = 6 := by native_decide

-- ì´ê²ƒì€ C(4, 2) = 6ê³¼ ê°™ë‹¤
example : Nat.choose 4 2 = 6 := by native_decide
```

### 9D.7.2 `Finset.powersetCard`ì˜ ì˜ë¯¸

`Finset.powersetCard k s`ëŠ” ìœ í•œ ì§‘í•© `s`ì˜ ëª¨ë“  **í¬ê¸° kì¸ ë¶€ë¶„ì§‘í•©**ë“¤ì˜ ì§‘í•©ì´ë‹¤.

```lean
-- powersetCard k s = {t âŠ† s | #t = k}
-- ì›ì†Œì˜ ìˆ˜ëŠ” choose (#s) k

open Finset in
example (n k : â„•) : (range n).powersetCard k |>.card = Nat.choose n k := by
  simp [card_powersetCard]
```

---

## 9D.8 ì¢…í•© ì—°ìŠµë¬¸ì œ

### ğŸ‹ï¸ ì—°ìŠµ 9D-3: ê¸°ë³¸ ê³„ì‚° (ê´„í˜¸ ì±„ìš°ê¸°)

```lean
-- ë‹¤ìŒ ê°’ì„ ê³„ì‚°í•˜ì—¬ ë¹ˆì¹¸ì„ ì±„ì›Œë¼
-- (êµì¬ ì—°ìŠµë¬¸ì œ 5, 6 ê¸°ë°˜)

-- P(6, 3) = ?
example : Nat.descFactorial 6 3 = âŸ¨___âŸ© := by native_decide

-- P(6, 5) = ?
example : Nat.descFactorial 6 5 = âŸ¨___âŸ© := by native_decide

-- P(8, 1) = ?
example : Nat.descFactorial 8 1 = âŸ¨___âŸ© := by native_decide

-- C(5, 1) = ?
example : Nat.choose 5 1 = âŸ¨___âŸ© := by native_decide

-- C(5, 3) = ?
example : Nat.choose 5 3 = âŸ¨___âŸ© := by native_decide

-- C(8, 4) = ?
example : Nat.choose 8 4 = âŸ¨___âŸ© := by native_decide

-- C(8, 0) = ?
example : Nat.choose 8 0 = âŸ¨___âŸ© := by native_decide

-- C(12, 6) = ?
example : Nat.choose 12 6 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
-- P(6, 3) = 6 Ã— 5 Ã— 4 = 120
example : Nat.descFactorial 6 3 = 120 := by native_decide

-- P(6, 5) = 6 Ã— 5 Ã— 4 Ã— 3 Ã— 2 = 720
example : Nat.descFactorial 6 5 = 720 := by native_decide

-- P(8, 1) = 8
example : Nat.descFactorial 8 1 = 8 := by native_decide

-- C(5, 1) = 5
example : Nat.choose 5 1 = 5 := by native_decide

-- C(5, 3) = 10
example : Nat.choose 5 3 = 10 := by native_decide

-- C(8, 4) = 70
example : Nat.choose 8 4 = 70 := by native_decide

-- C(8, 0) = 1
example : Nat.choose 8 0 = 1 := by native_decide

-- C(12, 6) = 924
example : Nat.choose 12 6 = 924 := by native_decide
```

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-4: ìˆœì—´ì˜ ìˆ˜ (êµì¬ ì—°ìŠµë¬¸ì œ 2, 3 ê¸°ë°˜)

```lean
-- ì§‘í•© {a, b, c, d, e, f, g}ì˜ ìˆœì—´ì€ ëª¨ë‘ ëª‡ ê°œì¸ê°€?
example : Nat.factorial 7 = âŸ¨___âŸ© := by native_decide

-- ì§‘í•© {a, b, c, d, e, f, g}ì˜ ìˆœì—´ ì¤‘ì—ì„œ aë¡œ ëë‚˜ëŠ” ê²ƒì€ ëª¨ë‘ ëª‡ ê°œì¸ê°€?
-- (aë¥¼ ë§ˆì§€ë§‰ì— ê³ ì •í•˜ë©´, ë‚˜ë¨¸ì§€ 6ê°œì˜ ìˆœì—´ì´ë‹¤)
example : Nat.factorial 6 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
-- 7ê°œ ì›ì†Œì˜ ì „ì²´ ìˆœì—´: 7! = 5040
example : Nat.factorial 7 = 5040 := by native_decide

-- aë¡œ ëë‚˜ëŠ” ìˆœì—´: ë‚˜ë¨¸ì§€ 6ê°œì˜ ìˆœì—´ = 6! = 720
example : Nat.factorial 6 = 720 := by native_decide
```

**í•´ì„¤**: ë§ˆì§€ë§‰ ìë¦¬ê°€ aë¡œ ê³ ì •ë˜ë©´, ë‚˜ë¨¸ì§€ 6ê°œì˜ ì›ì†Œë¥¼ ì•ì˜ 6ìë¦¬ì— ë°°ì—´í•˜ëŠ” ê²ƒì´ë¯€ë¡œ 6! = 720ì´ë‹¤.

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-5: 3-ìˆœì—´ê³¼ 3-ì¡°í•© ë‚˜ì—´ (êµì¬ ì—°ìŠµë¬¸ì œ 4 ê¸°ë°˜)

```lean
-- S = {1, 2, 3, 4, 5}ë¼ í•˜ì.
-- Sì˜ 3-ìˆœì—´ì˜ ìˆ˜ P(5, 3) = ?
example : Nat.descFactorial 5 3 = âŸ¨___âŸ© := by native_decide

-- Sì˜ 3-ì¡°í•©ì˜ ìˆ˜ C(5, 3) = ?
example : Nat.choose 5 3 = âŸ¨___âŸ© := by native_decide

-- P(5,3) = C(5,3) Ã— 3! ì¸ì§€ í™•ì¸í•˜ë¼
example : Nat.descFactorial 5 3 = Nat.choose 5 3 * Nat.factorial 3 := by âŸ¨___âŸ©
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
-- P(5, 3) = 60
example : Nat.descFactorial 5 3 = 60 := by native_decide

-- C(5, 3) = 10
example : Nat.choose 5 3 = 10 := by native_decide

-- P(5,3) = C(5,3) Ã— 3!
-- 60 = 10 Ã— 6 âœ“
example : Nat.descFactorial 5 3 = Nat.choose 5 3 * Nat.factorial 3 := by native_decide
```

**í•´ì„¤**: ìˆœì—´ = ì¡°í•© Ã— ë°°ì—´ì´ë¼ëŠ” í•µì‹¬ ê´€ê³„ P(n,r) = C(n,r) Ã— r!ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-6: 5-ì¡°í•©ì˜ ìˆ˜ (êµì¬ ì—°ìŠµë¬¸ì œ 7 ê¸°ë°˜)

```lean
-- ì›ì†Œ 9ê°œì˜ ì§‘í•©ì— ëŒ€í•œ 5-ì¡°í•©ì˜ ìˆ˜ë¥¼ ê³„ì‚°í•˜ë¼
example : Nat.choose 9 5 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
example : Nat.choose 9 5 = 126 := by native_decide
```

**í•´ì„¤**: C(9, 5) = 9! / (5! Ã— 4!) = 126ì´ë‹¤. ì°¸ê³ ë¡œ C(9, 5) = C(9, 4) = 126ì´ê¸°ë„ í•˜ë‹¤ (ëŒ€ì¹­ì„±).

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-7: ê²½ë§ˆ ìˆœìœ„ (êµì¬ ì—°ìŠµë¬¸ì œ 8 ê¸°ë°˜)

```lean
-- ê°™ì€ ë“±ìˆ˜ê°€ ì—†ì„ ê²½ìš°, 5ëª…ì˜ ì£¼ìê°€ ê²½ì£¼ë¥¼ ë§ˆì¹˜ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìˆœì„œì˜ ê²½ìš°ì˜ ìˆ˜ëŠ”?
-- (5ëª… ì „ì²´ì˜ ìˆœì—´)
example : Nat.factorial 5 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
example : Nat.factorial 5 = 120 := by native_decide
```

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-8: ê²½ë§ˆ ë©”ë‹¬ (êµì¬ ì—°ìŠµë¬¸ì œ 9 ê¸°ë°˜)

```lean
-- 12ë§ˆë¦¬ì˜ ë§ì´ ì°¸ê°€í•˜ëŠ” ê²½ë§ˆì—ì„œ 1, 2, 3ë“±ì´ ê²°ì •ë˜ëŠ” ê°€ëŠ¥ì„±ì€ ëª¨ë‘ ëª‡ ê°€ì§€ì¸ê°€?
-- P(12, 3) = ?
example : Nat.descFactorial 12 3 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
example : Nat.descFactorial 12 3 = 1320 := by native_decide
```

**í•´ì„¤**: P(12, 3) = 12 Ã— 11 Ã— 10 = 1320ì´ë‹¤.

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-9: íˆ¬í‘œ ìš©ì§€ (êµì¬ ì—°ìŠµë¬¸ì œ 10 ê¸°ë°˜)

```lean
-- ì–´ë–¤ ì£¼ì˜ ìƒì› ì˜ì› í›„ë³´ê°€ 6ëª… ìˆë‹¤.
-- íˆ¬í‘œ ìš©ì§€ì— í›„ë³´ìì˜ ì´ë¦„ì„ ì„œë¡œ ë‹¤ë¥¸ ìˆœì„œë¡œ ì¸ì‡„í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?
example : Nat.factorial 6 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
example : Nat.factorial 6 = 720 := by native_decide
```

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-10: ë¹„íŠ¸ ë¬¸ìì—´ (êµì¬ ì—°ìŠµë¬¸ì œ 11 ê¸°ë°˜)

```lean
-- ê¸¸ì´ 10ì¸ ë¹„íŠ¸ ë¬¸ìì—´ ì¤‘ ë‹¤ìŒì„ í¬í•¨í•˜ê³  ìˆëŠ” ê²ƒì€ ëª¨ë‘ ëª‡ ê°œì¸ê°€?

-- a) 4ê°œì˜ 1: C(10, 4) = ?
example : Nat.choose 10 4 = âŸ¨___âŸ© := by native_decide

-- b) 4ê°œ ì´í•˜ì˜ 1: C(10,0) + C(10,1) + C(10,2) + C(10,3) + C(10,4) = ?
example : Nat.choose 10 0 + Nat.choose 10 1 + Nat.choose 10 2 +
          Nat.choose 10 3 + Nat.choose 10 4 = âŸ¨___âŸ© := by native_decide

-- c) 4ê°œ ì´ìƒì˜ 1: ì „ì²´ - (3ê°œ ì´í•˜ì˜ 1) = 2^10 - (C(10,0)+C(10,1)+C(10,2)+C(10,3))
example : 2^10 - (Nat.choose 10 0 + Nat.choose 10 1 +
          Nat.choose 10 2 + Nat.choose 10 3) = âŸ¨___âŸ© := by native_decide

-- d) ë™ì¼í•œ ìˆ˜ì˜ 0ê³¼ 1: C(10, 5) = ?
example : Nat.choose 10 5 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
-- a) C(10, 4) = 210
example : Nat.choose 10 4 = 210 := by native_decide

-- b) 386
example : Nat.choose 10 0 + Nat.choose 10 1 + Nat.choose 10 2 +
          Nat.choose 10 3 + Nat.choose 10 4 = 386 := by native_decide

-- c) 2^10 - 176 = 1024 - 176 = 848
example : 2^10 - (Nat.choose 10 0 + Nat.choose 10 1 +
          Nat.choose 10 2 + Nat.choose 10 3) = 848 := by native_decide

-- d) C(10, 5) = 252
example : Nat.choose 10 5 = 252 := by native_decide
```

**í•´ì„¤**:
- a) 10ìë¦¬ ì¤‘ 1ì´ ë“¤ì–´ê°ˆ 4ìë¦¬ë¥¼ ê³ ë¥¸ë‹¤: C(10, 4) = 210
- b) 1ì´ 0ê°œ~4ê°œì¸ ê²½ìš°ë¥¼ ëª¨ë‘ í•©í•œë‹¤: 1 + 10 + 45 + 120 + 210 = 386
- c) ì „ì²´(2^10=1024)ì—ì„œ 1ì´ 0~3ê°œì¸ ê²½ìš°(176)ë¥¼ ë¹¼ë©´: 1024 - 176 = 848
- d) 0ê³¼ 1ì´ 5ê°œì”©ì´ë¯€ë¡œ C(10, 5) = 252

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-11: ì†Œí”„íŠ¸ë³¼ íŒ€ (êµì¬ ì—°ìŠµë¬¸ì œ 28 ê¸°ë°˜)

```lean
-- ì†Œí”„íŠ¸ë³¼ ê²½ê¸°ì— ì¶œì „í•˜ê¸° ìœ„í•´ì„œ 13ëª…ì´ ëª¨ì˜€ë‹¤.

-- a) ì‹œí•©ì— ë‚˜ê°ˆ 10ëª…ì˜ ì„ ìˆ˜ë¥¼ ê³ ë¥´ëŠ” ë°©ë²•ì˜ ìˆ˜: C(13, 10) = ?
example : Nat.choose 13 10 = âŸ¨___âŸ© := by native_decide

-- b) 13ëª… ì¤‘ì—ì„œ 10ëª…ì„ ë½‘ì•„ ê° í¬ì§€ì…˜ë³„ë¡œ í• ë‹¹í•˜ëŠ” ë°©ë²•: P(13, 10) = ?
example : Nat.descFactorial 13 10 = âŸ¨___âŸ© := by native_decide
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
-- a) C(13, 10) = C(13, 3) = 286
example : Nat.choose 13 10 = 286 := by native_decide

-- b) P(13, 10) = 13! / 3! = 1037836800
example : Nat.descFactorial 13 10 = 1037836800 := by native_decide
```

**í•´ì„¤**:
- a) íŒ€ ì„ ë°œì€ **ì¡°í•©** (ìˆœì„œ ë¬´ê´€): C(13, 10) = 286
- b) í¬ì§€ì…˜ ë°°ì •ì€ **ìˆœì—´** (ìˆœì„œ ìœ ê´€): P(13, 10) = 1,037,836,800

ì´ê²ƒì´ ìˆœì—´ê³¼ ì¡°í•©ì˜ í•µì‹¬ì ì¸ ì°¨ì´ì´ë‹¤!

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-12: ìœ„ì›íšŒ êµ¬ì„± (sorry ë°©ì‹) (êµì¬ ì—°ìŠµë¬¸ì œ 29 ê¸°ë°˜)

```lean
-- íšŒì›ì´ 25ëª…ì¸ ë™ì•„ë¦¬ê°€ ìˆë‹¤.
-- a) ì§‘í–‰ë¶€ ìœ„ì›ìœ¼ë¡œ 4ëª…ì„ ì„ ì¶œí•˜ëŠ” ë°©ë²•ì˜ ìˆ˜
-- (ìˆœì„œ ë¬´ê´€ â†’ ì¡°í•©)
example : Nat.choose 25 4 = 12650 := by sorry

-- b) íšŒì¥, ë¶€íšŒì¥, ì´ë¬´, ì¬ë¬´ë¥¼ ì„ ì¶œí•˜ëŠ” ë°©ë²•ì˜ ìˆ˜
-- (ìˆœì„œ ìœ ê´€ â†’ ìˆœì—´)
example : Nat.descFactorial 25 4 = 303600 := by sorry
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
-- a) C(25, 4) = 12650
example : Nat.choose 25 4 = 12650 := by native_decide

-- b) P(25, 4) = 25 Ã— 24 Ã— 23 Ã— 22 = 303600
example : Nat.descFactorial 25 4 = 303600 := by native_decide
```

**í•´ì„¤**: a)ì—ì„œëŠ” 4ëª…ì„ ë½‘ê¸°ë§Œ í•˜ë©´ ë˜ë¯€ë¡œ ì¡°í•©, b)ì—ì„œëŠ” ëˆ„ê°€ íšŒì¥, ë¶€íšŒì¥ì¸ì§€ê°€ ì¤‘ìš”í•˜ë¯€ë¡œ ìˆœì—´ì´ë‹¤.

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-13: ìˆœì—´ vs ì¡°í•© ê´€ê³„ ì¦ëª… (sorry ë°©ì‹)

```lean
-- P(n, r) = C(n, r) Ã— r! ì„ êµ¬ì²´ì ì¸ ê°’ìœ¼ë¡œ í™•ì¸í•˜ë¼

-- P(10, 3) = C(10, 3) Ã— 3!
example : Nat.descFactorial 10 3 = Nat.choose 10 3 * Nat.factorial 3 := by sorry

-- P(8, 5) = C(8, 5) Ã— 5!
example : Nat.descFactorial 8 5 = Nat.choose 8 5 * Nat.factorial 5 := by sorry

-- P(20, 4) = C(20, 4) Ã— 4!
example : Nat.descFactorial 20 4 = Nat.choose 20 4 * Nat.factorial 4 := by sorry
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
-- ëª¨ë‘ native_decideë¡œ ì¦ëª… ê°€ëŠ¥
example : Nat.descFactorial 10 3 = Nat.choose 10 3 * Nat.factorial 3 := by native_decide
example : Nat.descFactorial 8 5 = Nat.choose 8 5 * Nat.factorial 5 := by native_decide
example : Nat.descFactorial 20 4 = Nat.choose 20 4 * Nat.factorial 4 := by native_decide
```

**í•´ì„¤**: P(n, r) = C(n, r) Ã— r!ì€ ìˆœì—´ê³¼ ì¡°í•©ì˜ ê°€ì¥ ê·¼ë³¸ì ì¸ ê´€ê³„ì´ë‹¤. ê°ê° êµ¬ì²´ì ì¸ ê°’ì„ ë„£ìœ¼ë©´:
- 720 = 120 Ã— 6
- 6720 = 56 Ã— 120
- 116280 = 4845 Ã— 24

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-14: Permì˜ ì¹´ë””ë„ë¦¬í‹° (sorry ë°©ì‹)

```lean
import Mathlib

-- nê°œ ì›ì†Œì˜ ì „ì²´ ìˆœì—´ì˜ ìˆ˜ê°€ n!ì„ì„ í™•ì¸í•˜ë¼
-- Fin nì˜ ìˆœì—´ ìˆ˜ = n!
example : Fintype.card (Equiv.Perm (Fin 4)) = 24 := by sorry
example : Fintype.card (Equiv.Perm (Fin 6)) = 720 := by sorry
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
example : Fintype.card (Equiv.Perm (Fin 4)) = 24 := by
  simp [Fintype.card_perm]
  native_decide

example : Fintype.card (Equiv.Perm (Fin 6)) = 720 := by
  simp [Fintype.card_perm]
  native_decide
```

**í•´ì„¤**: `Fintype.card_perm` ì •ë¦¬ê°€ `Fintype.card (Equiv.Perm Î±) = Nat.factorial (Fintype.card Î±)`ì„ ë§í•´ì£¼ë¯€ë¡œ, `simp`ë¡œ ì´ê²ƒì„ ì ìš©í•œ ë’¤ `native_decide`ë¡œ ìˆ˜ì¹˜ë¥¼ í™•ì¸í•œë‹¤.

</details>

### ğŸ‹ï¸ ì—°ìŠµ 9D-15: powersetCard í™œìš© (sorry ë°©ì‹)

```lean
import Mathlib
open Finset

-- {0, 1, 2, 3, 4}ì˜ í¬ê¸° 3ì¸ ë¶€ë¶„ì§‘í•©ì˜ ìˆ˜ê°€ C(5, 3) = 10ì„ì„ ì¦ëª…í•˜ë¼
example : (range 5).powersetCard 3 |>.card = 10 := by sorry
```

<details>
<summary>ğŸ”‘ ë‹µ ë³´ê¸°</summary>

```lean
example : (range 5).powersetCard 3 |>.card = 10 := by native_decide
```

ë˜ëŠ” `card_powersetCard`ë¥¼ í™œìš©í•  ìˆ˜ë„ ìˆë‹¤:

```lean
example : (range 5).powersetCard 3 |>.card = 10 := by
  rw [card_powersetCard]
  simp [card_range]
```

</details>

---

## 9D.9 ì´ ì¥ì˜ í•µì‹¬ ìš”ì•½

| ê°œë… | ê³µì‹ | Lean 4 í‘œí˜„ | ì˜ë¯¸ |
|------|------|-----------|------|
| **íŒ©í† ë¦¬ì–¼**(factorial) | n! | `Nat.factorial n` | 1ë¶€í„° nê¹Œì§€ì˜ ê³± |
| **r-ìˆœì—´**(r-permutation) | P(n,r) = n!/(n-r)! | `Nat.descFactorial n r` | ìˆœì„œ ìˆëŠ” ì„ íƒ |
| **r-ì¡°í•©**(r-combination) | C(n,r) = n!/(r!(n-r)!) | `Nat.choose n r` | ìˆœì„œ ì—†ëŠ” ì„ íƒ |
| **ì „ì²´ ìˆœì—´** | P(n,n) = n! | `Fintype.card (Equiv.Perm (Fin n))` | nê°œì˜ ì „ì²´ ë°°ì—´ |

**í•µì‹¬ ê´€ê³„**: `P(n, r) = C(n, r) Ã— r!`

ìˆœì—´ì€ "**ë½‘ì•„ì„œ ì¤„ ì„¸ìš°ëŠ” ê²ƒ**", ì¡°í•©ì€ "**ê·¸ëƒ¥ ë½‘ëŠ” ê²ƒ**"ì´ë¼ê³  ê¸°ì–µí•˜ë©´ ëœë‹¤.

### ì£¼ìš” Lean 4 ì „ìˆ  ë° í•¨ìˆ˜

| í•¨ìˆ˜/ì „ìˆ  | ìš©ë„ |
|---------|------|
| `Nat.factorial n` | n!ì„ ê³„ì‚° |
| `Nat.descFactorial n r` | P(n, r)ì„ ê³„ì‚° |
| `Nat.choose n r` | C(n, r)ì„ ê³„ì‚° |
| `Nat.factorial_pos` | n! > 0 ì¦ëª… |
| `Nat.choose_zero_right` | C(n, 0) = 1 |
| `Nat.choose_self` | C(n, n) = 1 |
| `Nat.choose_symm` | C(n, r) = C(n, n-r) |
| `Fintype.card_perm` | ìˆœì—´ì˜ ìˆ˜ = n! |
| `card_powersetCard` | í¬ê¸° kì¸ ë¶€ë¶„ì§‘í•©ì˜ ìˆ˜ = C(n, k) |
| `native_decide` | êµ¬ì²´ì ì¸ ìˆ˜ì¹˜ ê³„ì‚° |
| `norm_num` | ì‚°ìˆ  ê³„ì‚° |

---

> **ë‹¤ìŒ í¸ ì˜ˆê³ **: Part 9-Eì—ì„œëŠ” **ì´í•­ ì •ë¦¬**(Binomial Theorem)ì™€ **íŒŒìŠ¤ì¹¼ í•­ë“±ì‹**(Pascal's Identity)ì„ Lean 4ë¡œ ë‹¤ë£¬ë‹¤.
